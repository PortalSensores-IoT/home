(function(){var e={80:function(e,a,o){"use strict";var i=o(9963),s=o(6252);const t={key:0,id:"loaderContainer",class:"w-100"},n=(0,s._)("div",{id:"loader",class:"spinner-border text-success",role:"status"},[(0,s._)("span",{class:"fs-1"}," IoT")],-1),l=[n],r={key:1,class:"container-fluid"},c={class:"row flex-nowrap"},d={id:"sidebarMenu",class:"col-auto col-md-2 col-xl-2 px-sm-2 px-0"},u={class:"d-flex flex-column align-items-center align-items-sm-start px-2 pt-2 text-white min-vh-100"},m=(0,s._)("span",{class:"fs-3 d-none d-sm-inline"},"IoT",-1),p=(0,s._)("br",null,null,-1),b={class:"nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start w-100",id:"menu"},S={class:"nav-item w-100"},g=(0,s._)("span",{class:"ms-1 d-none d-sm-inline"},"Inicio",-1),A={class:"nav-item w-100"},h=(0,s._)("span",{class:"ms-1 d-none d-sm-inline"},"Sensores",-1),f={class:"nav-item w-100"},v=(0,s._)("span",{class:"ms-1 d-none d-sm-inline"},"Sugerencias",-1),_={class:"col px-0",id:"contenedorVistas"},w=(0,s._)("nav",{class:"navbar shadow-sm px-4",id:"headerVistas"},[(0,s._)("a",{class:"navbar-brand",href:"#"},"Vista")],-1),y={class:"px-4 pt-4 h-100 w-100"},C={key:2,id:"accessDenied",class:"center-0"};function D(e,a,o,i,n,D){const x=(0,s.up)("router-link"),P=(0,s.up)("font-awesome-icon"),j=(0,s.up)("router-view"),z=(0,s.up)("PaginaNoEncontrada");return n.comienzaApp?void 0!==this.autorizaciones&&""!==this.autorizaciones&&"ERR_BAD_REQUEST"!==this.autorizaciones.code&&this.comienzaApp&&!this.mostrarAccesoDenegado?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("div",u,[(0,s.Wm)(x,{to:"/",class:"d-flex align-items-center pt-3 pb-26 mb-md-0 me-md-auto text-white text-decoration-none"},{default:(0,s.w5)((()=>[m])),_:1}),p,(0,s._)("ul",b,[(0,s._)("li",S,[(0,s.Wm)(x,{to:"/",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{icon:"fa-solid fa-house"}),(0,s.Uk)(),g])),_:1})]),(0,s._)("li",A,[(0,s.Wm)(x,{to:"/sensores",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{icon:"fa-solid fa-tower-broadcast"}),(0,s.Uk)(),h])),_:1})]),(0,s._)("li",f,[(0,s.Wm)(x,{to:"/sugerencias",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{icon:"fa-solid fa-table-list"}),(0,s.Uk)(),v])),_:1})])])])]),(0,s._)("div",_,[w,(0,s._)("div",y,[(0,s.Wm)(j,{autorizaciones:n.autorizaciones},null,8,["autorizaciones"])])])])])):this.mostrarAccesoDenegado?((0,s.wg)(),(0,s.iD)("div",C,[(0,s.Wm)(z)])):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",t,l))}const x=(0,s._)("div",{class:"lock"},null,-1),P=(0,s._)("div",{class:"message"},[(0,s._)("h1",null,"403"),(0,s._)("h2",null,"El acceso a esta pagina está restringido"),(0,s._)("p",null," Consulte con el administrador del sitio si cree que se trata de un error. ")],-1);function j(e,a){return(0,s.wg)(),(0,s.iD)(s.HY,null,[x,P],64)}var z=o(3744);const T={},k=(0,z.Z)(T,[["render",j]]);var M=k,B=(o(7658),o(196));const O="https://pp1-iot.herokuapp.com/",U="Bearer ",E="api/areas",F="api/areas/ids/",R="api/areas/pisos",I="api/tickets/",V="api/usuarios/user/token",Z="api/usuarios/user/auth",Y="api/areas/nombres/",N="api/sensores/tipos/",W="piso ";var H={async getAreas(){console.log("getAreas");let e=await B.ZP.get(O+E).then((async e=>{let a=await this.getCantidadPisos(),o=[];for(let i=0;i<a.length;i++){let a=e.data[W+i];for(let e=0;e<a.length;e++)o.push(a[e])}return o})).catch((e=>{console.log(e)}));return e},async getAreaById(e){let a=B.ZP.get(O+F+e).then((async e=>e.data)).catch((e=>{console.log(e)}));return a},async getCantidadPisos(){let e=await B.ZP.get(O+R).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async crearTicketSensor(e){let a={headers:{Authorization:U+window.localStorage.token}},o={tipo:e.tipo,tipoSensor:e.tipoSensor,nombreArea:e.area,descripcion:e.descripcion,idSensor:e.idSensor,urls:e.urls},i=await B.ZP.get(O+I,o,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return i},async validarUsuario(e){let a="si"===e.ultimoanio,o="si"===e.estecnico;"directivo"===e.rol&&(e.rol=o?"TECNICO":"DIRECTIVO"),"alumno"===e.rol&&(e.rol=a?"ALUMNO_ULTIMO_ANIO ":"ALUMNO"),"admin"===e.rol&&(e.rol="ADMIN");let i={headers:{email:e.email,usuario:e.username,rol:e.rol}},s=await B.ZP.get(O+V,i).then((async e=>e.data)).catch((e=>{console.log(e)}));return s},async getAutorizaciones(e){let a={headers:{Authorization:U+e}},o=await B.ZP.get(O+Z,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o},async getAreasByPiso(e){let a=await B.ZP.get(O+Y+e).then((async a=>a.data[W+e])).catch((e=>{console.log(e)}));return a},async getTiposDeSensores(){let e=await B.ZP.get(O+N).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async formatearTiposDeSensores(e){let a=[];for(let o=0;o<e.length;o++){let i=e[o],s=i;i=i.replaceAll("_"," "),i=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase(),a.push({id:s,descripcion:i})}return a}},L=o(7810),q={name:"App",components:{PaginaNoEncontrada:M},data(){return{autorizaciones:"",comienzaApp:!1,mostrarAccesoDenegado:!1,pantallaDeCarga:2e3}},methods:{},beforeMount(){setTimeout((()=>{"undefined"!==localStorage.autorizaciones&&void 0!==localStorage.autorizaciones?(this.autorizaciones=JSON.parse(localStorage.autorizaciones),this.comienzaApp=!0,this.mostrarAccesoDenegado=!1):(this.mostrarAccesoDenegado=!0,this.comienzaApp=!0)}),this.pantallaDeCarga)},beforeUnmount(){}};const G=(0,z.Z)(q,[["render",D]]);var Q=G,J=o(2201),K=o(3577);const X={id:"sensoresContainer",class:"shadow col-11 col-md-11"},$={id:"barraBusquedaContainer"},ee={id:"barraBusquedaDiv"},ae={id:"selectorGroupPiso"},oe={id:"selectPisoPlaceholder",selected:"",hidden:""},ie=["value","selected"],se={id:"selectorGroupLugar"},te={id:"selectLugarPlaceholder",selected:"",hidden:""},ne=["value"],le={id:"btnBusquedaContainer"},re=["disabled"],ce={id:"btnBusquedaContainer"},de=["disabled"],ue={id:"btnAltaContainer"};function me(e,a,o,t,n,l){const r=(0,s.up)("FormAltaSensor"),c=(0,s.up)("registroTable");return(0,s.wg)(),(0,s.iD)("div",X,[(0,s._)("div",$,[(0,s._)("div",ee,[(0,s._)("div",ae,[(0,s.wy)((0,s._)("select",{onChange:a[0]||(a[0]=e=>l.filtrarLugaresPorPiso(n.pisoSeleccionado)),"onUpdate:modelValue":a[1]||(a[1]=e=>n.pisoSeleccionado=e),id:"comboBoxPiso",class:"btn btn-success form select",placeholder:"Seleccionar Piso"},[(0,s._)("option",oe,(0,K.zw)(n.pisoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.pisos,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.piso,value:e,selected:"0"==e},(0,K.zw)(0==e?"Planta baja":e),9,ie)))),128))],544),[[i.bM,n.pisoSeleccionado]])]),(0,s._)("div",se,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.areaSeleccionada=e),id:"comboBoxLugar",class:"btn btn-success"},[(0,s._)("option",te,(0,K.zw)(n.areaSeleccionada),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.areasCombox,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e},(0,K.zw)(e.nombre),9,ne)))),128))],512),[[i.bM,n.areaSeleccionada]])]),(0,s._)("div",le,[(0,s._)("button",{id:"btnBuscar",disabled:"Área..."===this.areaSeleccionada||null===this.areaSeleccionada,class:"btn btn-success",onClick:a[3]||(a[3]=e=>l.buscarSensores())}," Buscar ",8,re)]),(0,s._)("div",ce,[(0,s._)("button",{id:"btnBuscar",disabled:"Área..."===this.areaSeleccionada||null===this.areaSeleccionada,class:"btn btn-success",onClick:a[4]||(a[4]=e=>l.redireccionarSensoresEnTiempoReal())}," Ver en tiempo real ",8,de)])]),(0,s._)("div",ue,[(0,s.wy)((0,s._)("button",{id:"btnAgregar",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalAltaSensor",onClick:a[5]||(a[5]=e=>l.obtenerTiposDeSensores())}," Solicitar alta sensor ",512),[[i.F8,this.autorizaciones["Alta sensor"]]])]),(0,s.Wm)(r,{tiposSensores:n.tiposSensores,pisos:n.pisos},null,8,["tiposSensores","pisos"])]),(0,s.Wm)(c,{tituloTabla:n.tituloTabla,sensoresInArea:n.sensoresInArea,autorizaciones:o.autorizaciones},null,8,["tituloTabla","sensoresInArea","autorizaciones"])])}const pe=e=>((0,s.dD)("data-v-3227c79e"),e=e(),(0,s.Cn)(),e),be={id:"instanciasTableDiv"},Se={class:"table table-striped"},ge={id:"headTable",scope:"col",colspan:"5"},Ae=pe((()=>(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Sensor")]),(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Unidad de medida")]),(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Último valor registrado")]),(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Fecha")]),(0,s._)("th",{scope:"col",colspan:"2"})],-1))),he={id:"imgModificar"},fe=["onClick"],ve=["src"],_e={id:"imgTacho"},we=["onClick"],ye=["src"];function Ce(e,a,t,n,l,r){const c=(0,s.up)("ConfirmarBajaSensor"),d=(0,s.up)("ConfirmarModificacionSensor");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",be,[(0,s._)("table",Se,[(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",ge,[(0,s._)("b",null,(0,K.zw)(t.tituloTabla),1)])]),Ae]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.sensoresInArea,(e=>((0,s.wg)(),(0,s.iD)("tr",{id:"registroRow",key:e.id},[(0,s._)("td",null,(0,K.zw)(e.tipo),1),(0,s._)("td",null,(0,K.zw)(e.unidadDeMedida),1),(0,s._)("td",null,(0,K.zw)(this.getUltimoRegistroValor(e)),1),(0,s._)("td",null,(0,K.zw)(this.getUltimoRegistroFecha(e)),1),(0,s._)("td",he,[(0,s._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#modalModificaSensor",onClick:a=>r.modificarSensor(e)},[(0,s._)("img",{src:o(2965),alt:"algo"},null,8,ve)],8,fe)]),(0,s.wy)((0,s._)("td",_e,[void 0!==t.autorizaciones?((0,s.wg)(),(0,s.iD)("button",{key:0,"data-bs-toggle":"modal","data-bs-target":"#modalBajaSensor",onClick:a=>r.eliminarSensor(e)},[(0,s._)("img",{src:o(6654),alt:""},null,8,ye)],8,we)):(0,s.kq)("",!0)],512),[[i.F8,this.autorizaciones["Baja sensor"]]])])))),128))])])]),(0,s.Wm)(c,{bajaSensor:this.bajaSensor},null,8,["bajaSensor"]),(0,s.Wm)(d,{modificaSensor:this.modificaSensor},null,8,["modificaSensor"])],64)}const De={class:"modal fade",id:"modalBajaSensor",tabindex:"-1","aria-labelledby":"modalBajaSensor","aria-hidden":"false"},xe={class:"modal-dialog"},Pe={class:"modal-content"},je=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitud de baja de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ze={class:"modal-body"},Te={class:"modal-footer"},ke=(0,s._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),Me={class:"modal fade",id:"modalConfirmaBajaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaBajaSensor","aria-hidden":"false"},Be={class:"modal-dialog"},Oe={class:"modal-content"},Ue=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando baja de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ee={class:"modal-body"},Fe={key:0,class:"spinner-border text-success",role:"status"},Re=(0,s._)("span",{class:"sr-only"},"iot",-1),Ie=[Re],Ve={key:1,class:"",role:"status"};function Ze(e,a,o,i,t,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",De,[(0,s._)("div",xe,[(0,s._)("div",Pe,[je,(0,s._)("div",ze," ¿Estás seguro que desea solicitar la baja del sensor de "+(0,K.zw)(null!==this.bajaSensor?this.bajaSensor.tipoSensor:"")+"? ",1),(0,s._)("div",Te,[ke,(0,s._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=e=>n.enviarSolicitudBajaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaBajaSensor"}," Confirmar ")])])])]),(0,s._)("div",Me,[(0,s._)("div",Be,[(0,s._)("div",Oe,[Ue,(0,s._)("div",Ee,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",Fe,Ie)):((0,s.wg)(),(0,s.iD)("div",Ve,(0,K.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Ye={props:{bajaSensor:Object},data(){return{muestraConfimacionEnvioSolicitud:!1,textoConfirmacionBaja:"",muestraSpinner:!1}},methods:{async enviarSolicitudBajaSensor(){let e=await H.crearTicketSensor(this.bajaSensor);console.log(e),this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==e&&""!==e?"Solicitud de baja de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const Ne=(0,z.Z)(Ye,[["render",Ze]]);var We=Ne;const He={class:"modal fade",id:"modalModificaSensor",tabindex:"-1","aria-labelledby":"modalModificaSensor","aria-hidden":"false"},Le={class:"modal-dialog"},qe={class:"modal-content p-2"},Ge={class:"modal-header"},Qe={class:"modal-title",id:"exampleModalLabel"},Je=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ke={class:"mb-5 col-12"},Xe={class:"modal-footer"},$e=(0,s._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),ea={class:"modal fade",id:"modalConfirmaModificacionSensor",tabindex:"-1","aria-labelledby":"modalConfirmaModificacionSensor","aria-hidden":"false"},aa={class:"modal-dialog"},oa={class:"modal-content"},ia=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando modificacion "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),sa={class:"modal-body"},ta={key:0,class:"spinner-border text-success",role:"status"},na=(0,s._)("span",{class:"sr-only"},"iot",-1),la=[na],ra={key:1,class:"",role:"status"};function ca(e,a,o,t,n,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",He,[(0,s._)("div",Le,[(0,s._)("div",qe,[(0,s._)("div",Ge,[(0,s._)("h5",Qe," Modificar sensor de "+(0,K.zw)(null!==this.modificaSensor?this.modificaSensor.tipoSensor:""),1),Je]),(0,s._)("div",Ke,[(0,s.wy)((0,s._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",placeholder:"Describa su modificacion","onUpdate:modelValue":a[0]||(a[0]=e=>n.descripcion=e),required:""},null,512),[[i.nr,n.descripcion]])]),(0,s._)("div",Xe,[$e,(0,s._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[1]||(a[1]=e=>l.enviarSolicitudModificacionSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaModificacionSensor"}," Enviar sugerencia ")])])])]),(0,s._)("div",ea,[(0,s._)("div",aa,[(0,s._)("div",oa,[ia,(0,s._)("div",sa,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",ta,la)):((0,s.wg)(),(0,s.iD)("div",ra,(0,K.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var da={props:{modificaSensor:Object,sensoreSeleccionado:Object},data(){return{muestraSpinner:!0,textoConfirmacionBaja:"modificacionSolicitada",descripcion:""}},methods:{async enviarSolicitudModificacionSensor(){let e=await iotController.crearTicketSensor(this.modificaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==e&&""!==e?"Solicitud de modificacion de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const ua=(0,z.Z)(da,[["render",ca]]);var ma=ua,pa={name:"RegistroTable",components:{ConfirmarBajaSensor:We,ConfirmarModificacionSensor:ma},props:{tituloTabla:String,sensoresInArea:Object,autorizaciones:Object},data(){return{bajaSensor:null,modificaSensor:null}},methods:{getUltimoRegistroValor(e){if(void 0!=e.registros&&null!=e.registros){let a=e.registros[e.registros.length-1];return void 0===a?"-":this.getSignoUnidadDeMedida(e,a.valor)}return"-"},getUltimoRegistroFecha(e){if(void 0!=e.registros&&null!=e.registros){let a=e.registros[e.registros.length-1];return void 0===a?"-":a.fecha}return"-"},getSignoUnidadDeMedida(e,a){switch(e.unidadDeMedida){case"Porcentaje":return a+"%";case"Celcius":return a+"°C";case"Decibeles":return a+"dB";case"ppm":return a+"ppm";case"Boolean":return"PUERTA"===e.tipo||"VENTANA"===e.tipo?1==a?" Abierta":" Cerrada":1==a?" Activado":" Desactivado";case void 0:return"-"}},eliminarSensor(e){let a="BAJA_SENSOR",o=e.tipo,i=this.areaSeleccionada,s=e.id;this.bajaSensor={tipo:a,tipoSensor:o,area:i,descripcion:"",idSensor:s,urls:[]}},clearSensorBaja(){this.bajaSensor=null},modificarSensor(e){let a="MODIFICAR_SENSOR",o=e.tipo,i=this.areaSeleccionada,s=e.id;this.modificaSensor={tipo:a,tipoSensor:o,area:i,descripcion:"",idSensor:s,urls:[]}},clearSensorModificacion(){this.modificaSensor=null}}};const ba=(0,z.Z)(pa,[["render",Ce],["__scopeId","data-v-3227c79e"]]);var Sa=ba;const ga=e=>((0,s.dD)("data-v-637807d0"),e=e(),(0,s.Cn)(),e),Aa={class:"modal fade",id:"modalAltaSensor",tabindex:"-1","aria-labelledby":"modalAltaSensor","aria-hidden":"true"},ha={class:"modal-dialog"},fa={class:"modal-content"},va=ga((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Solicitud de alta de sensor")],-1))),_a={class:"modal-body p-0 pt-2"},wa={class:"mb-3 col-8"},ya=ga((()=>(0,s._)("label",{for:"validationDefault04",class:"form-label"},"Tipo de sensor",-1))),Ca={id:"selectPisoPlaceholder",selected:"",hidden:""},Da=["value"],xa={class:"mb-3 col-8"},Pa=ga((()=>(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Piso",-1))),ja={id:"selectPisoPlaceholder",selected:"",hidden:""},za=["value"],Ta={class:"mb-3 col-8"},ka=ga((()=>(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Área",-1))),Ma={id:"selectAreaPlaceholder",selected:"",hidden:""},Ba=["value"],Oa={id:"buttonsForms",class:"col-12 modal-footer"},Ua={class:"modal fade",id:"modalConfirmaAltaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaAltaSensor","aria-hidden":"false"},Ea={class:"modal-dialog"},Fa={class:"modal-content"},Ra=ga((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando alta de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Ia={class:"modal-body"},Va={key:0,class:"spinner-border text-success",role:"status"},Za=ga((()=>(0,s._)("span",{class:"sr-only"},"iot",-1))),Ya=[Za],Na={key:1,class:"",role:"status"};function Wa(e,a,o,t,n,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Aa,[(0,s._)("div",ha,[(0,s._)("div",fa,[va,(0,s._)("div",_a,[(0,s._)("form",{class:"column",onSubmit:a[6]||(a[6]=(0,i.iM)((e=>l.limpiarForm()),["prevent"]))},[(0,s._)("div",wa,[ya,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.tipoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",Ca,(0,K.zw)(n.tipoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tiposSensores,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e.descripcion},(0,K.zw)(e.descripcion),9,Da)))),128))],512),[[i.bM,n.tipoSeleccionado]])]),(0,s._)("div",xa,[Pa,(0,s.wy)((0,s._)("select",{onChange:a[1]||(a[1]=e=>l.obtenerAreasPorPiso()),"onUpdate:modelValue":a[2]||(a[2]=e=>n.pisoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",ja,(0,K.zw)(n.pisoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pisos,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,K.zw)(0===e?"Planta baja":e),9,za)))),128))],544),[[i.bM,n.pisoSeleccionado]])]),(0,s._)("div",Ta,[ka,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.areaSeleccionada=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",Ma,(0,K.zw)(n.areaSeleccionada),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.areasCombobox,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,K.zw)(e[1]),9,Ba)))),128))],512),[[i.bM,n.areaSeleccionada]])]),(0,s._)("div",Oa,[(0,s._)("button",{id:"btnEnviarSolicitud",class:"btn btn-success btn-sm",type:"submit","data-bs-dismiss":"modal",onClick:a[4]||(a[4]=e=>l.enviarSolicitudAltaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaAltaSensor"},"Enviar solicitud"),(0,s._)("button",{id:"btnCancelarSolicitud",class:"btn btn-outline-danger btn-sm","data-bs-dismiss":"modal",onClick:a[5]||(a[5]=e=>l.limpiarForm())},"Cancelar")])],32)])])])]),(0,s._)("div",Ua,[(0,s._)("div",Ea,[(0,s._)("div",Fa,[Ra,(0,s._)("div",Ia,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",Va,Ya)):((0,s.wg)(),(0,s.iD)("div",Na,(0,K.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Ha={name:"FormAltaSensor",props:{tiposSensores:Object,pisos:Object},data(){return{areasCombobox:[],unidadSeleccionada:"",tipoSeleccionado:"Seleccionar tipo...",pisoSeleccionado:"Seleccionar piso...",areaSeleccionada:"Seleccionar área...",muestraSpinner:!0}},async beforeMount(){},methods:{cerrarForm(){},limpiarForm(){this.pisoSeleccionado="Seleccionar piso...",this.areaSeleccionada="Seleccionar área...",this.tipoSeleccionado="Seleccionar tipo...",this.unidadSeleccionada=""},async obtenerAreasPorPiso(){this.areasCombobox=await H.getAreasByPiso(this.pisoSeleccionado)},async enviarSolicitudAltaSensor(){let e="ALTA_SENSOR",a=this.tipoSeleccionado,o=this.areaSeleccionada;this.altaSensor={tipo:e,tipoSensor:a,area:o,descripcion:"",idSensor:"",urls:[]};let i=await H.crearTicketSensor(this.altaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==i&&""!==i?"Solicitud de alta de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const La=(0,z.Z)(Ha,[["render",Wa],["__scopeId","data-v-637807d0"]]);var qa=La,Ga={name:"Sensores",components:{RegistroTable:Sa,FormAltaSensor:qa},props:{autorizaciones:Object},data(){return{pisos:[],areas:[],areasCombox:[],tiposSensores:[],pisoSeleccionado:"Piso...",areaSeleccionada:"Área...",sensoresInArea:null,tituloTabla:"Tabla de sensores "}},async beforeMount(){await this.cargarDatos()},methods:{filtrarLugaresPorPiso(e){this.areasCombox=[];for(let a=0;a<this.areas.length;a++){let o=this.areas[a];o.piso==e&&(this.areasCombox.includes(o.nombre)||this.areasCombox.push(o))}this.areasCombox.sort(),this.areaSeleccionada="Área..."},async cargarDatos(){this.areas=await H.getAreas(),console.log(this.areas),this.pisos=await H.getCantidadPisos(),console.log(this.pisos)},async buscarSensores(){this.setTituloTabla();let e=await H.getAreaById(this.areaSeleccionada.id);this.sensoresInArea=e.sensores},setTituloTabla(){"Área..."!=this.areaSeleccionada&&"Piso..."!=this.pisoSeleccionado&&(this.tituloTabla="Tabla de sensores  "+this.areaSeleccionada.nombre+" - Piso: "+(0==this.pisoSeleccionado?"Planta baja":this.pisoSeleccionado))},redireccionarSensoresEnTiempoReal(){window.open("https://www.iot-pp1.click/ui/#!/0?area="+this.areaSeleccionada.nombre.replaceAll(" ","_"),"_blank")},async obtenerTiposDeSensores(){this.tiposSensores=await H.formatearTiposDeSensores(await H.getTiposDeSensores())}}};const Qa=(0,z.Z)(Ga,[["render",me],["__scopeId","data-v-63a2d7a6"]]);var Ja=Qa;const Ka={id:"btnEnviarSugerencia",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalAltaSugerencia"};function Xa(e,a,o,t,n,l){const r=(0,s.up)("FormAltaSugerencia");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("button",Ka," Enviar sugerencia ",512),[[i.F8,this.autorizaciones["Alta sugerencia"]]])]),(0,s.Wm)(r)],64)}const $a={class:"modal fade",id:"modalAltaSugerencia",tabindex:"-1","aria-labelledby":"modalAltaSugerencia","aria-hidden":"true"},eo={class:"modal-dialog"},ao={class:"modal-content"},oo=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),io=(0,s._)("h3",{class:"card-header card-title"},"Solicitud de sugerencia",-1),so={class:"mx-30"},to=(0,s._)("div",{class:"mb-4 col-7 col-md-4"},[(0,s._)("label",{for:"asuntoForm",class:"text-left form-label"},"Asunto"),(0,s._)("input",{type:"text",class:"form-control",id:"asuntoForm",placeholder:"p. ej.: Nuevo tipo de sensor",required:""})],-1),no={id:"detalleSensor"},lo={class:"mb-3 col-3"},ro=(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Piso",-1),co=["value"],uo=["value"],mo={class:"mb-3 col-3"},po=(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Área",-1),bo=["value"],So=["value"],go={class:"mb-3 col-3"},Ao=(0,s._)("label",{for:"validationDefault04",class:"form-label"},"Tipo de sensor",-1),ho=["value"],fo=["value"],vo=(0,s._)("div",{class:"mb-5 col-12"},[(0,s._)("label",{for:"sugerenciaForm",class:"form-label"},"Descripción"),(0,s._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",required:""})],-1),_o={class:"col-auto"};function wo(e,a,o,t,n,l){return(0,s.wg)(),(0,s.iD)("div",$a,[(0,s._)("div",eo,[(0,s._)("div",ao,[oo,io,(0,s._)("form",so,[to,(0,s._)("div",no,[(0,s._)("div",lo,[ro,(0,s.wy)((0,s._)("select",{onChange:a[0]||(a[0]=e=>l.obtenerAreasPorPiso()),"onUpdate:modelValue":a[1]||(a[1]=e=>n.pisoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",{selected:"",value:n.pisoSeleccionado},(0,K.zw)(n.pisoSeleccionado),9,co),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.pisos,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,K.zw)(e),9,uo)))),128))],544),[[i.bM,n.pisoSeleccionado]])]),(0,s._)("div",mo,[po,(0,s.wy)((0,s._)("select",{class:"form-select",id:"validationDefault04","onUpdate:modelValue":a[2]||(a[2]=e=>n.areaSeleccionada=e),required:""},[(0,s._)("option",{selected:"",value:n.areaSeleccionada},(0,K.zw)(""===n.areaSeleccionada?"Seleccionar area...":n.areaSeleccionada[1]),9,bo),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.areas,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,K.zw)(e[1]),9,So)))),128))],512),[[i.bM,n.areaSeleccionada]])]),(0,s._)("div",go,[Ao,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.tipoSensorSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",{selected:"",value:n.tipoSensorSeleccionado},(0,K.zw)(n.tipoSensorSeleccionado),9,ho),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.tiposSensores,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,K.zw)(e),9,fo)))),128))],512),[[i.bM,n.tipoSensorSeleccionado]])])]),vo,(0,s._)("div",_o,[(0,s._)("button",{type:"submit",onClick:a[4]||(a[4]=a=>e.enviarSugerencia(a)),class:"btn btn-success mb-3","data-bs-toggle":"modal","data-bs-target":"#modalSugerencia"}," Siguiente ")])])])])])}var yo={name:"FormAltaSugerencia",data(){return{asunto:"",pisos:[],areas:[],tiposSensores:[],tiposSensores:"",pisoSeleccionado:"Seleccionar piso...",areaSeleccionada:"",tipoSensorSeleccionado:"Seleccionar tipo...",descripcion:""}},async beforeMount(){this.pisos=await H.getCantidadPisos(),this.tiposSensores=await H.getTiposDeSensores()},methods:{async obtenerAreasPorPiso(){this.areas=await H.getAreasByPiso(this.pisoSeleccionado)}}};const Co=(0,z.Z)(yo,[["render",wo]]);var Do=Co,xo={name:"Sugerencias",components:{FormAltaSugerencia:Do},props:{autorizaciones:Object},created(){window.onbeforeunload=function(e){this.$router.push("/"),e.preventDefault()}},data(){return{pisos:[],areas:[],pisoSeleccionado:"",areaSeleccionada:"",tiposSensores:["Temperatura","Puerta","Humedad","Calidad de Aire","Proximidad","Humo","Gas","Nivel de ruido"]}},beforeMount(){this.cargarDatos()},methods:{enviarSugerencia:function(e){e&&e.preventDefault()},async cargarDatos(){this.pisos=await H.getCantidadPisos()},async obtenerAreasPorPiso(){this.areas=await H.getAreasByPiso(this.pisoSeleccionado)}}};const Po=(0,z.Z)(xo,[["render",Xa],["__scopeId","data-v-2fddf354"]]);var jo=Po;const zo=e=>((0,s.dD)("data-v-7a129386"),e=e(),(0,s.Cn)(),e),To={id:"inicioBox"},ko=zo((()=>(0,s._)("h1",null,"Bienvenido",-1))),Mo=zo((()=>(0,s._)("p",null," Este es el portal del area de IOT para la gestion de sensores. Aquí podrá gestionar los sensores, ver el mapa de la institucion. El objetivo de este portal es brindar a la institucion facilidad adminitrativa y mejorar la experiencia de los estudiantes por el paso en la institución. ",-1))),Bo=[ko,Mo];function Oo(e,a,o,i,t,n){return(0,s.wg)(),(0,s.iD)("div",To,Bo)}var Uo={name:"Inicio",props:{autorizaciones:Object},data(){return{}}};const Eo=(0,z.Z)(Uo,[["render",Oo],["__scopeId","data-v-7a129386"]]);var Fo=Eo;const Ro=[{path:"/",name:"inicio",component:Fo},{path:"/sensores",name:"sensores",component:Ja},{path:"/sugerencias",name:"sugerencias",component:jo},{path:"/:paginaNoEncontrada(.*)*",component:M}],Io=(0,J.p7)({history:(0,J.PO)("/home/"),routes:Ro});Io.beforeResolve((async(e,a)=>{window.localStorage.username=e.query.usuario,window.localStorage.email=e.query.email;let o={username:e.query.usuario,email:e.query.email,rol:e.query.categoria,ultimoanio:e.query.ultimoanio,estecnico:e.query.estecnico,instituto:e.query.instituto},i=await H.validarUsuario(o).then((async e=>e));void 0!==i&&(void 0!==window.localStorage.token&&""!==window.localStorage.token||(window.localStorage.token=i,window.localStorage.autorizaciones=JSON.stringify(await H.getAutorizaciones(window.localStorage.token)))),e.fullPath=""}));var Vo=Io,Zo=o(2346),Yo=(o(8877),o(85)),No=o(3636),Wo=o(9417);No.vI.add(Wo.QlY,Wo.u7T,Wo.wp6),(0,i.ri)(Q).use(Vo,B.ZP,Zo.Z,Yo.Z).component("font-awesome-icon",L.GN).mount("#app")},2965:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwABOvYAATr2ATqxVzoAAAAHdElNRQfkCAwLMQ9hEPKPAAABiklEQVRIx83VPY9MURjA8d+dmY3XZrHJfoIpRKtRXESnI0a2FN1G4yU0tEShsZ1GopDwEYRgphJahV0VBfGSRcwYa+fmKmZ29445994xJDynPf//c85znude/nVUf3N/xT57vJZMli7S8EbbeVOT4m+l0skUa3jHl6wiAlP2q0tHoJ6WxQF+zIJZicteuW67rxruUQOxu3YE8z52xOd1nIoZK6roaG9sm5fmrKZpBodveyfV80PqvRP909cy2e549Muz9rR80rBg1jdXPHfTTlUfXHAre+X+CeYLS3fJVqd1stnLBcP4Ge0wnicYxs/m42HBBn6xDA8Ljo6PhwS7PAvi0+F+GRUc1pW6YYtz6zh1DzXVs2hNOA7YLNF11UnbBu9O7CBiS2WCGYdQcUqNTNv0J3BoDsOCvXYjUvPdomtuBwatULCiK/JCy31PfMzH8wQtx23ytBgtEqx6UAauRWXcjf+vIFuDWFL4n0jExYI5c5Ne4aXlsYnlbCOXfdZHI7KkafUPC/dX4yeHS7FpTr8HNQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wOC0xMlQxMTo0OToxNSswMDowMJf82tUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDgtMTJUMTE6NDk6MTUrMDA6MDDmoWJpAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADUxMo+NU4EAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTk3MjMyOTU1Q8dOFgAAABJ0RVh0VGh1bWI6OlNpemUANjk0MEJCTl0M0wAAAEd0RVh0VGh1bWI6OlVSSQBmaWxlOi8vLi91cGxvYWRzLzU2L0lpZG5xOHYvMjQ2OS9lZGl0X21vZGlmeV9pY29uXzE0OTQ4OS5wbmeUbIoLAAAAAElFTkSuQmCC"},6654:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAI9JREFUWIXtlkEKgCAQRX8RXqmbdCzv6cpuUBuLsMxxHJFiHkhofP9jNgUoCo8FgAOwRcuFd815Kr9KNOcoo54nGQhFktz6RuGCJhSPtSTffQKfFIhHmtuLC4iiAiqgAirQXWBiZOJvem7/SvcJUAR8eM6M+4/MysieWKR/QKnL1giYcIFnFPuQNTUCyr/ZASPpP7RbDTpRAAAAAElFTkSuQmCC"},2480:function(){}},a={};function o(i){var s=a[i];if(void 0!==s)return s.exports;var t=a[i]={id:i,loaded:!1,exports:{}};return e[i].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(a,i,s,t){if(!i){var n=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],t=e[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&t||n>=t)&&Object.keys(o.O).every((function(e){return o.O[e](i[r])}))?i.splice(r--,1):(l=!1,t<n&&(n=t));if(l){e.splice(d--,1);var c=s();void 0!==c&&(a=c)}}return a}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[i,s,t]}}(),function(){o.d=function(e,a){for(var i in a)o.o(a,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(a){return 0===e[a]};var a=function(a,i){var s,t,n=i[0],l=i[1],r=i[2],c=0;if(n.some((function(a){return 0!==e[a]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(r)var d=r(o)}for(a&&a(i);c<n.length;c++)t=n[c],o.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return o.O(d)},i=self["webpackChunkportal_iot"]=self["webpackChunkportal_iot"]||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(80)}));i=o.O(i)})();
//# sourceMappingURL=app.26e630eb.js.map