(function(){var e={8605:function(e,a,o){"use strict";var i=o(9963),s=o(6252);const t={key:0,class:"spinner-border text-success",role:"status"},n=(0,s._)("span",{class:"sr-only"}," iot",-1),l=[n],r={key:1,id:"home"},c={id:"header",class:"nav nav-tabs bg-light"},d={id:"navItemsContainer"},u={class:"nav-item"},m={class:"nav-item"},p={class:"nav-item"},b=(0,s._)("li",{id:"headerTitle",class:"rigth-0"},"IoT",-1),S={key:2,id:"accessDenied",class:"center-0"};function g(e,a,o,i,n,g){const h=(0,s.up)("router-link"),A=(0,s.up)("router-view"),v=(0,s.up)("PaginaNoEncontrada");return n.comienzaApp?void 0!==this.autorizaciones&&""!==this.autorizaciones&&"ERR_BAD_REQUEST"!==this.autorizaciones.code&&this.comienzaApp&&!this.mostrarAccesoDenegado?((0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("ul",c,[(0,s._)("div",d,[(0,s._)("li",u,[(0,s.Wm)(h,{id:"headerItem",to:"/",class:"nav-link active","aria-current":"page"},{default:(0,s.w5)((()=>[(0,s.Uk)("Inicio")])),_:1})]),(0,s._)("li",m,[(0,s.Wm)(h,{id:"headerItem",to:"/sensores",class:"nav-link active","aria-current":"page"},{default:(0,s.w5)((()=>[(0,s.Uk)("Sensores")])),_:1})]),(0,s._)("li",p,[(0,s.Wm)(h,{id:"headerItem",to:"/sugerencias",class:"nav-link active","aria-current":"page"},{default:(0,s.w5)((()=>[(0,s.Uk)("Sugerencias")])),_:1})])]),b]),(0,s.Wm)(A,{autorizaciones:n.autorizaciones},null,8,["autorizaciones"])])):this.mostrarAccesoDenegado?((0,s.wg)(),(0,s.iD)("div",S,[(0,s.Wm)(v)])):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",t,l))}const h=(0,s._)("div",{class:"lock"},null,-1),A=(0,s._)("div",{class:"message"},[(0,s._)("h1",null,"403"),(0,s._)("h2",null,"El acceso a esta pagina está restringido"),(0,s._)("p",null," Consulte con el administrador del sitio si cree que se trata de un error. ")],-1);function v(e,a){return(0,s.wg)(),(0,s.iD)(s.HY,null,[h,A],64)}var f=o(3744);const _={},w=(0,f.Z)(_,[["render",v]]);var y=w,C=(o(7658),o(196));const D="https://pp1-iot.herokuapp.com/",x="Bearer ",P="api/areas",T="api/areas/ids/",j="api/areas/pisos",k="api/tickets/",z="api/usuarios/user/token",B="api/usuarios/user/auth",M="api/areas/nombres/",O="api/sensores/tipos/",U="piso ";var E={async getAreas(){console.log("getAreas");let e=await C.ZP.get(D+P).then((async e=>{let a=await this.getCantidadPisos(),o=[];for(let i=0;i<a.length;i++){let a=e.data[U+i];for(let e=0;e<a.length;e++)o.push(a[e])}return o})).catch((e=>{console.log(e)}));return e},async getAreaById(e){let a=C.ZP.get(D+T+e).then((async e=>e.data)).catch((e=>{console.log(e)}));return a},async getCantidadPisos(){let e=await C.ZP.get(D+j).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async crearTicketSensor(e){let a={headers:{Authorization:x+window.localStorage.token}},o={tipo:e.tipo,tipoSensor:e.tipoSensor,nombreArea:e.area,descripcion:e.descripcion,idSensor:e.idSensor,urls:e.urls},i=await C.ZP.get(D+k,o,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return i},async validarUsuario(e){let a="si"===e.ultimoanio,o="si"===e.estecnico;"directivo"===e.rol&&(e.rol=o?"TECNICO":"DIRECTIVO"),"alumno"===e.rol&&(e.rol=a?"ALUMNO_ULTIMO_ANIO ":"ALUMNO"),"admin"===e.rol&&(e.rol="ADMIN");let i={headers:{email:e.email,usuario:e.username,rol:e.rol}},s=await C.ZP.get(D+z,i).then((async e=>e.data)).catch((e=>{console.log(e)}));return s},async getAutorizaciones(e){let a={headers:{Authorization:x+e}},o=await C.ZP.get(D+B,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o},async getAreasByPiso(e){let a=await C.ZP.get(D+M+e).then((async a=>a.data[U+e])).catch((e=>{console.log(e)}));return a},async getTiposDeSensores(){let e=await C.ZP.get(D+O).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async formatearTiposDeSensores(e){let a=[];for(let o=0;o<e.length;o++){let i=e[o],s=i;i=i.replaceAll("_"," "),i=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase(),a.push({id:s,descripcion:i})}return a}},F={name:"App",components:{PaginaNoEncontrada:y},data(){return{autorizaciones:"",comienzaApp:!1,mostrarAccesoDenegado:!1,pantallaDeCarga:5e3}},methods:{},beforeMount(){setTimeout((()=>{"undefined"!==localStorage.autorizaciones&&void 0!==localStorage.autorizaciones?(this.autorizaciones=JSON.parse(localStorage.autorizaciones),this.comienzaApp=!0,this.mostrarAccesoDenegado=!1):(this.mostrarAccesoDenegado=!0,this.comienzaApp=!0)}),this.pantallaDeCarga)},beforeUnmount(){}};const R=(0,f.Z)(F,[["render",g]]);var I=R,V=o(2201),Z=o(3577);const Y=e=>((0,s.dD)("data-v-f1bba32e"),e=e(),(0,s.Cn)(),e),N={id:"sensoresContainer",class:"shadow col-11 col-md-9"},H={id:"barraBusquedaContainer"},W={id:"barraBusquedaDiv"},L={id:"selectorGroupPiso"},q={id:"selectPisoPlaceholder",selected:"",hidden:""},G=["value","selected"],Q={id:"selectorGroupLugar"},J={id:"selectLugarPlaceholder",selected:"",hidden:""},K=["value"],X={id:"btnBusquedaContainer"},$=["disabled"],ee={id:"btnBusquedaContainer"},ae=["disabled"],oe={id:"btnAltaContainer"},ie=Y((()=>(0,s._)("footer",{id:"footerBox",class:"col-12 text-center text-lg-start bg-light text-muted"},[(0,s._)("div",{class:"col-12 p-3",style:{"background-color":"#DADED3"}}," © 2022 Copyright: IoTeam ")],-1)));function se(e,a,o,t,n,l){const r=(0,s.up)("FormAltaSensor"),c=(0,s.up)("registroTable");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",N,[(0,s._)("div",H,[(0,s._)("div",W,[(0,s._)("div",L,[(0,s.wy)((0,s._)("select",{onChange:a[0]||(a[0]=e=>l.filtrarLugaresPorPiso(n.pisoSeleccionado)),"onUpdate:modelValue":a[1]||(a[1]=e=>n.pisoSeleccionado=e),id:"comboBoxPiso",class:"btn btn-success form select",placeholder:"Seleccionar Piso"},[(0,s._)("option",q,(0,Z.zw)(n.pisoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.pisos,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.piso,value:e,selected:"0"==e},(0,Z.zw)(0==e?"Planta baja":e),9,G)))),128))],544),[[i.bM,n.pisoSeleccionado]])]),(0,s._)("div",Q,[(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.areaSeleccionada=e),id:"comboBoxLugar",class:"btn btn-success"},[(0,s._)("option",J,(0,Z.zw)(n.areaSeleccionada),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.areasCombox,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e},(0,Z.zw)(e.nombre),9,K)))),128))],512),[[i.bM,n.areaSeleccionada]])]),(0,s._)("div",X,[(0,s._)("button",{id:"btnBuscar",disabled:"Área..."===this.areaSeleccionada||null===this.areaSeleccionada,class:"btn btn-success",onClick:a[3]||(a[3]=e=>l.buscarSensores())}," Buscar ",8,$)]),(0,s._)("div",ee,[(0,s._)("button",{id:"btnBuscar",disabled:"Área..."===this.areaSeleccionada||null===this.areaSeleccionada,class:"btn btn-success",onClick:a[4]||(a[4]=e=>l.redireccionarSensoresEnTiempoReal())}," Ver en tiempo real ",8,ae)])]),(0,s._)("div",oe,[(0,s.wy)((0,s._)("button",{id:"btnAgregar",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalAltaSensor",onClick:a[5]||(a[5]=e=>l.obtenerTiposDeSensores())}," Solicitar alta sensor ",512),[[i.F8,this.autorizaciones["Alta sensor"]]])]),(0,s.Wm)(r,{tiposSensores:n.tiposSensores,pisos:n.pisos},null,8,["tiposSensores","pisos"])]),(0,s.Wm)(c,{tituloTabla:n.tituloTabla,sensoresInArea:n.sensoresInArea,autorizaciones:o.autorizaciones},null,8,["tituloTabla","sensoresInArea","autorizaciones"])]),ie],64)}const te=e=>((0,s.dD)("data-v-3227c79e"),e=e(),(0,s.Cn)(),e),ne={id:"instanciasTableDiv"},le={class:"table table-striped"},re={id:"headTable",scope:"col",colspan:"5"},ce=te((()=>(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Sensor")]),(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Unidad de medida")]),(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Último valor registrado")]),(0,s._)("th",{scope:"col"},[(0,s._)("b",null,"Fecha")]),(0,s._)("th",{scope:"col",colspan:"2"})],-1))),de={id:"imgModificar"},ue=["onClick"],me=["src"],pe={id:"imgTacho"},be=["onClick"],Se=["src"];function ge(e,a,t,n,l,r){const c=(0,s.up)("ConfirmarBajaSensor"),d=(0,s.up)("ConfirmarModificacionSensor");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",ne,[(0,s._)("table",le,[(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",re,[(0,s._)("b",null,(0,Z.zw)(t.tituloTabla),1)])]),ce]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.sensoresInArea,(e=>((0,s.wg)(),(0,s.iD)("tr",{id:"registroRow",key:e.id},[(0,s._)("td",null,(0,Z.zw)(e.tipo),1),(0,s._)("td",null,(0,Z.zw)(e.unidadDeMedida),1),(0,s._)("td",null,(0,Z.zw)(this.getUltimoRegistroValor(e)),1),(0,s._)("td",null,(0,Z.zw)(this.getUltimoRegistroFecha(e)),1),(0,s._)("td",de,[(0,s._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#modalModificaSensor",onClick:a=>r.modificarSensor(e)},[(0,s._)("img",{src:o(2965),alt:"algo"},null,8,me)],8,ue)]),(0,s.wy)((0,s._)("td",pe,[void 0!==t.autorizaciones?((0,s.wg)(),(0,s.iD)("button",{key:0,"data-bs-toggle":"modal","data-bs-target":"#modalBajaSensor",onClick:a=>r.eliminarSensor(e)},[(0,s._)("img",{src:o(6654),alt:""},null,8,Se)],8,be)):(0,s.kq)("",!0)],512),[[i.F8,this.autorizaciones["Baja sensor"]]])])))),128))])])]),(0,s.Wm)(c,{bajaSensor:this.bajaSensor},null,8,["bajaSensor"]),(0,s.Wm)(d,{modificaSensor:this.modificaSensor},null,8,["modificaSensor"])],64)}const he={class:"modal fade",id:"modalBajaSensor",tabindex:"-1","aria-labelledby":"modalBajaSensor","aria-hidden":"false"},Ae={class:"modal-dialog"},ve={class:"modal-content"},fe=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitud de baja de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_e={class:"modal-body"},we={class:"modal-footer"},ye=(0,s._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),Ce={class:"modal fade",id:"modalConfirmaBajaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaBajaSensor","aria-hidden":"false"},De={class:"modal-dialog"},xe={class:"modal-content"},Pe=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando baja de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Te={class:"modal-body"},je={key:0,class:"spinner-border text-success",role:"status"},ke=(0,s._)("span",{class:"sr-only"},"iot",-1),ze=[ke],Be={key:1,class:"",role:"status"};function Me(e,a,o,i,t,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",he,[(0,s._)("div",Ae,[(0,s._)("div",ve,[fe,(0,s._)("div",_e," ¿Estás seguro que desea solicitar la baja del sensor de "+(0,Z.zw)(null!==this.bajaSensor?this.bajaSensor.tipoSensor:"")+"? ",1),(0,s._)("div",we,[ye,(0,s._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=e=>n.enviarSolicitudBajaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaBajaSensor"}," Confirmar ")])])])]),(0,s._)("div",Ce,[(0,s._)("div",De,[(0,s._)("div",xe,[Pe,(0,s._)("div",Te,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",je,ze)):((0,s.wg)(),(0,s.iD)("div",Be,(0,Z.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Oe={props:{bajaSensor:Object},data(){return{muestraConfimacionEnvioSolicitud:!1,textoConfirmacionBaja:"",muestraSpinner:!1}},methods:{async enviarSolicitudBajaSensor(){let e=await E.crearTicketSensor(this.bajaSensor);console.log(e),this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==e&&""!==e?"Solicitud de baja de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const Ue=(0,f.Z)(Oe,[["render",Me]]);var Ee=Ue;const Fe={class:"modal fade",id:"modalModificaSensor",tabindex:"-1","aria-labelledby":"modalModificaSensor","aria-hidden":"false"},Re={class:"modal-dialog"},Ie={class:"modal-content p-2"},Ve={class:"modal-header"},Ze={class:"modal-title",id:"exampleModalLabel"},Ye=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ne={class:"mb-5 col-12"},He={class:"modal-footer"},We=(0,s._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),Le={class:"modal fade",id:"modalConfirmaModificacionSensor",tabindex:"-1","aria-labelledby":"modalConfirmaModificacionSensor","aria-hidden":"false"},qe={class:"modal-dialog"},Ge={class:"modal-content"},Qe=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando modificacion "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Je={class:"modal-body"},Ke={key:0,class:"spinner-border text-success",role:"status"},Xe=(0,s._)("span",{class:"sr-only"},"iot",-1),$e=[Xe],ea={key:1,class:"",role:"status"};function aa(e,a,o,t,n,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Fe,[(0,s._)("div",Re,[(0,s._)("div",Ie,[(0,s._)("div",Ve,[(0,s._)("h5",Ze," Modificar sensor de "+(0,Z.zw)(null!==this.modificaSensor?this.modificaSensor.tipoSensor:""),1),Ye]),(0,s._)("div",Ne,[(0,s.wy)((0,s._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",placeholder:"Describa su modificacion","onUpdate:modelValue":a[0]||(a[0]=e=>n.descripcion=e),required:""},null,512),[[i.nr,n.descripcion]])]),(0,s._)("div",He,[We,(0,s._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[1]||(a[1]=e=>l.enviarSolicitudModificacionSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaModificacionSensor"}," Enviar sugerencia ")])])])]),(0,s._)("div",Le,[(0,s._)("div",qe,[(0,s._)("div",Ge,[Qe,(0,s._)("div",Je,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",Ke,$e)):((0,s.wg)(),(0,s.iD)("div",ea,(0,Z.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var oa={props:{modificaSensor:Object,sensoreSeleccionado:Object},data(){return{muestraSpinner:!0,textoConfirmacionBaja:"modificacionSolicitada",descripcion:""}},methods:{async enviarSolicitudModificacionSensor(){let e=await iotController.crearTicketSensor(this.modificaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==e&&""!==e?"Solicitud de modificacion de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const ia=(0,f.Z)(oa,[["render",aa]]);var sa=ia,ta={name:"RegistroTable",components:{ConfirmarBajaSensor:Ee,ConfirmarModificacionSensor:sa},props:{tituloTabla:String,sensoresInArea:Object,autorizaciones:Object},data(){return{bajaSensor:null,modificaSensor:null}},methods:{getUltimoRegistroValor(e){if(void 0!=e.registros&&null!=e.registros){let a=e.registros[e.registros.length-1];return void 0===a?"-":this.getSignoUnidadDeMedida(e,a.valor)}return"-"},getUltimoRegistroFecha(e){if(void 0!=e.registros&&null!=e.registros){let a=e.registros[e.registros.length-1];return void 0===a?"-":a.fecha}return"-"},getSignoUnidadDeMedida(e,a){switch(e.unidadDeMedida){case"Porcentaje":return a+"%";case"Celcius":return a+"°C";case"Decibeles":return a+"dB";case"ppm":return a+"ppm";case"Boolean":return"PUERTA"===e.tipo||"VENTANA"===e.tipo?1==a?" Abierta":" Cerrada":1==a?" Activado":" Desactivado";case void 0:return"-"}},eliminarSensor(e){let a="BAJA_SENSOR",o=e.tipo,i=this.areaSeleccionada,s=e.id;this.bajaSensor={tipo:a,tipoSensor:o,area:i,descripcion:"",idSensor:s,urls:[]}},clearSensorBaja(){this.bajaSensor=null},modificarSensor(e){let a="MODIFICAR_SENSOR",o=e.tipo,i=this.areaSeleccionada,s=e.id;this.modificaSensor={tipo:a,tipoSensor:o,area:i,descripcion:"",idSensor:s,urls:[]}},clearSensorModificacion(){this.modificaSensor=null}}};const na=(0,f.Z)(ta,[["render",ge],["__scopeId","data-v-3227c79e"]]);var la=na;const ra=e=>((0,s.dD)("data-v-637807d0"),e=e(),(0,s.Cn)(),e),ca={class:"modal fade",id:"modalAltaSensor",tabindex:"-1","aria-labelledby":"modalAltaSensor","aria-hidden":"true"},da={class:"modal-dialog"},ua={class:"modal-content"},ma=ra((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Solicitud de alta de sensor")],-1))),pa={class:"modal-body p-0 pt-2"},ba={class:"mb-3 col-8"},Sa=ra((()=>(0,s._)("label",{for:"validationDefault04",class:"form-label"},"Tipo de sensor",-1))),ga={id:"selectPisoPlaceholder",selected:"",hidden:""},ha=["value"],Aa={class:"mb-3 col-8"},va=ra((()=>(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Piso",-1))),fa={id:"selectPisoPlaceholder",selected:"",hidden:""},_a=["value"],wa={class:"mb-3 col-8"},ya=ra((()=>(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Área",-1))),Ca={id:"selectAreaPlaceholder",selected:"",hidden:""},Da=["value"],xa={id:"buttonsForms",class:"col-12 modal-footer"},Pa={class:"modal fade",id:"modalConfirmaAltaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaAltaSensor","aria-hidden":"false"},Ta={class:"modal-dialog"},ja={class:"modal-content"},ka=ra((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando alta de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),za={class:"modal-body"},Ba={key:0,class:"spinner-border text-success",role:"status"},Ma=ra((()=>(0,s._)("span",{class:"sr-only"},"iot",-1))),Oa=[Ma],Ua={key:1,class:"",role:"status"};function Ea(e,a,o,t,n,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",ca,[(0,s._)("div",da,[(0,s._)("div",ua,[ma,(0,s._)("div",pa,[(0,s._)("form",{class:"column",onSubmit:a[6]||(a[6]=(0,i.iM)((e=>l.limpiarForm()),["prevent"]))},[(0,s._)("div",ba,[Sa,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.tipoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",ga,(0,Z.zw)(n.tipoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tiposSensores,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e.descripcion},(0,Z.zw)(e.descripcion),9,ha)))),128))],512),[[i.bM,n.tipoSeleccionado]])]),(0,s._)("div",Aa,[va,(0,s.wy)((0,s._)("select",{onChange:a[1]||(a[1]=e=>l.obtenerAreasPorPiso()),"onUpdate:modelValue":a[2]||(a[2]=e=>n.pisoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",fa,(0,Z.zw)(n.pisoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pisos,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,Z.zw)(0===e?"Planta baja":e),9,_a)))),128))],544),[[i.bM,n.pisoSeleccionado]])]),(0,s._)("div",wa,[ya,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.areaSeleccionada=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",Ca,(0,Z.zw)(n.areaSeleccionada),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.areasCombobox,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,Z.zw)(e[1]),9,Da)))),128))],512),[[i.bM,n.areaSeleccionada]])]),(0,s._)("div",xa,[(0,s._)("button",{id:"btnEnviarSolicitud",class:"btn btn-success btn-sm",type:"submit","data-bs-dismiss":"modal",onClick:a[4]||(a[4]=e=>l.enviarSolicitudAltaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaAltaSensor"},"Enviar solicitud"),(0,s._)("button",{id:"btnCancelarSolicitud",class:"btn btn-outline-danger btn-sm","data-bs-dismiss":"modal",onClick:a[5]||(a[5]=e=>l.limpiarForm())},"Cancelar")])],32)])])])]),(0,s._)("div",Pa,[(0,s._)("div",Ta,[(0,s._)("div",ja,[ka,(0,s._)("div",za,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",Ba,Oa)):((0,s.wg)(),(0,s.iD)("div",Ua,(0,Z.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Fa={name:"FormAltaSensor",props:{tiposSensores:Object,pisos:Object},data(){return{areasCombobox:[],unidadSeleccionada:"",tipoSeleccionado:"Seleccionar tipo...",pisoSeleccionado:"Seleccionar piso...",areaSeleccionada:"Seleccionar área...",muestraSpinner:!0}},async beforeMount(){},methods:{cerrarForm(){},limpiarForm(){this.pisoSeleccionado="Seleccionar piso...",this.areaSeleccionada="Seleccionar área...",this.tipoSeleccionado="Seleccionar tipo...",this.unidadSeleccionada=""},async obtenerAreasPorPiso(){this.areasCombobox=await E.getAreasByPiso(this.pisoSeleccionado)},async enviarSolicitudAltaSensor(){let e="ALTA_SENSOR",a=this.tipoSeleccionado,o=this.areaSeleccionada;this.altaSensor={tipo:e,tipoSensor:a,area:o,descripcion:"",idSensor:"",urls:[]};let i=await E.crearTicketSensor(this.altaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==i&&""!==i?"Solicitud de alta de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const Ra=(0,f.Z)(Fa,[["render",Ea],["__scopeId","data-v-637807d0"]]);var Ia=Ra,Va={name:"Sensores",components:{RegistroTable:la,FormAltaSensor:Ia},props:{autorizaciones:Object},data(){return{pisos:[],areas:[],areasCombox:[],tiposSensores:[],pisoSeleccionado:"Piso...",areaSeleccionada:"Área...",sensoresInArea:null,tituloTabla:"Tabla de sensores "}},async beforeMount(){await this.cargarDatos()},methods:{filtrarLugaresPorPiso(e){this.areasCombox=[];for(let a=0;a<this.areas.length;a++){let o=this.areas[a];o.piso==e&&(this.areasCombox.includes(o.nombre)||this.areasCombox.push(o))}this.areasCombox.sort(),this.areaSeleccionada="Área..."},async cargarDatos(){this.areas=await E.getAreas(),console.log(this.areas),this.pisos=await E.getCantidadPisos(),console.log(this.pisos)},async buscarSensores(){this.setTituloTabla();let e=await E.getAreaById(this.areaSeleccionada.id);this.sensoresInArea=e.sensores},setTituloTabla(){"Área..."!=this.areaSeleccionada&&"Piso..."!=this.pisoSeleccionado&&(this.tituloTabla="Tabla de sensores  "+this.areaSeleccionada.nombre+" - Piso: "+(0==this.pisoSeleccionado?"Planta baja":this.pisoSeleccionado))},redireccionarSensoresEnTiempoReal(){window.open("https://www.iot-pp1.click/ui/#!/0?area="+this.areaSeleccionada.nombre.replaceAll(" ","_"),"_blank")},async obtenerTiposDeSensores(){this.tiposSensores=await E.formatearTiposDeSensores(await E.getTiposDeSensores())}}};const Za=(0,f.Z)(Va,[["render",se],["__scopeId","data-v-f1bba32e"]]);var Ya=Za;const Na=e=>((0,s.dD)("data-v-27e7c81c"),e=e(),(0,s.Cn)(),e),Ha={id:"btnEnviarSugerencia",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalAltaSugerencia"},Wa=Na((()=>(0,s._)("footer",{id:"footerBox",class:"col-12 text-center text-lg-start bg-light text-muted"},[(0,s._)("div",{class:"col-12 p-3",style:{"background-color":"#DADED3"}}," © 2022 Copyright: IoTeam ")],-1)));function La(e,a,o,t,n,l){const r=(0,s.up)("FormAltaSugerencia");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",null,[(0,s.wy)((0,s._)("button",Ha," Enviar sugerencia ",512),[[i.F8,this.autorizaciones["Alta sugerencia"]]])]),(0,s.Wm)(r),Wa],64)}const qa={class:"modal fade",id:"modalAltaSugerencia",tabindex:"-1","aria-labelledby":"modalAltaSugerencia","aria-hidden":"true"},Ga={class:"modal-dialog"},Qa={class:"modal-content"},Ja=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ka=(0,s._)("h3",{class:"card-header card-title"},"Solicitud de sugerencia",-1),Xa={class:"mx-30"},$a=(0,s._)("div",{class:"mb-4 col-7 col-md-4"},[(0,s._)("label",{for:"asuntoForm",class:"text-left form-label"},"Asunto"),(0,s._)("input",{type:"text",class:"form-control",id:"asuntoForm",placeholder:"p. ej.: Nuevo tipo de sensor",required:""})],-1),eo={id:"detalleSensor"},ao={class:"mb-3 col-3"},oo=(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Piso",-1),io=["value"],so=["value"],to={class:"mb-3 col-3"},no=(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Área",-1),lo=["value"],ro=["value"],co={class:"mb-3 col-3"},uo=(0,s._)("label",{for:"validationDefault04",class:"form-label"},"Tipo de sensor",-1),mo=["value"],po=["value"],bo=(0,s._)("div",{class:"mb-5 col-12"},[(0,s._)("label",{for:"sugerenciaForm",class:"form-label"},"Descripción"),(0,s._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",required:""})],-1),So={class:"col-auto"};function go(e,a,o,t,n,l){return(0,s.wg)(),(0,s.iD)("div",qa,[(0,s._)("div",Ga,[(0,s._)("div",Qa,[Ja,Ka,(0,s._)("form",Xa,[$a,(0,s._)("div",eo,[(0,s._)("div",ao,[oo,(0,s.wy)((0,s._)("select",{onChange:a[0]||(a[0]=e=>l.obtenerAreasPorPiso()),"onUpdate:modelValue":a[1]||(a[1]=e=>n.pisoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",{selected:"",value:n.pisoSeleccionado},(0,Z.zw)(n.pisoSeleccionado),9,io),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.pisos,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,Z.zw)(e),9,so)))),128))],544),[[i.bM,n.pisoSeleccionado]])]),(0,s._)("div",to,[no,(0,s.wy)((0,s._)("select",{class:"form-select",id:"validationDefault04","onUpdate:modelValue":a[2]||(a[2]=e=>n.areaSeleccionada=e),required:""},[(0,s._)("option",{selected:"",value:n.areaSeleccionada},(0,Z.zw)(""===n.areaSeleccionada?"Seleccionar area...":n.areaSeleccionada[1]),9,lo),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.areas,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,Z.zw)(e[1]),9,ro)))),128))],512),[[i.bM,n.areaSeleccionada]])]),(0,s._)("div",co,[uo,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.tipoSensorSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",{selected:"",value:n.tipoSensorSeleccionado},(0,Z.zw)(n.tipoSensorSeleccionado),9,mo),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.tiposSensores,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,Z.zw)(e),9,po)))),128))],512),[[i.bM,n.tipoSensorSeleccionado]])])]),bo,(0,s._)("div",So,[(0,s._)("button",{type:"submit",onClick:a[4]||(a[4]=a=>e.enviarSugerencia(a)),class:"btn btn-success mb-3","data-bs-toggle":"modal","data-bs-target":"#modalSugerencia"}," Siguiente ")])])])])])}var ho={name:"FormAltaSugerencia",data(){return{asunto:"",pisos:[],areas:[],tiposSensores:[],tiposSensores:"",pisoSeleccionado:"Seleccionar piso...",areaSeleccionada:"",tipoSensorSeleccionado:"Seleccionar tipo...",descripcion:""}},async beforeMount(){this.pisos=await E.getCantidadPisos(),this.tiposSensores=await E.getTiposDeSensores()},methods:{async obtenerAreasPorPiso(){this.areas=await E.getAreasByPiso(this.pisoSeleccionado)}}};const Ao=(0,f.Z)(ho,[["render",go]]);var vo=Ao,fo={name:"Sugerencias",components:{FormAltaSugerencia:vo},props:{autorizaciones:Object},created(){window.onbeforeunload=function(e){this.$router.push("/"),e.preventDefault()}},data(){return{pisos:[],areas:[],pisoSeleccionado:"",areaSeleccionada:"",tiposSensores:["Temperatura","Puerta","Humedad","Calidad de Aire","Proximidad","Humo","Gas","Nivel de ruido"]}},beforeMount(){this.cargarDatos()},methods:{enviarSugerencia:function(e){e&&e.preventDefault()},async cargarDatos(){this.pisos=await E.getCantidadPisos()},async obtenerAreasPorPiso(){this.areas=await E.getAreasByPiso(this.pisoSeleccionado)}}};const _o=(0,f.Z)(fo,[["render",La],["__scopeId","data-v-27e7c81c"]]);var wo=_o;const yo=e=>((0,s.dD)("data-v-e104e678"),e=e(),(0,s.Cn)(),e),Co=yo((()=>(0,s._)("div",{id:"inicioBox"},[(0,s._)("h1",null,"Bienvenido"),(0,s._)("p",null," Este es el portal del area de IOT para la gestion de sensores. Aquí podrá gestionar los sensores, ver el mapa de la institucion. El objetivo de este portal es brindar a la institucion facilidad adminitrativa y mejorar la experiencia de los estudiantes por el paso en la institución. ")],-1))),Do=yo((()=>(0,s._)("footer",{id:"footerBox",class:"col-12 text-center text-lg-start text-muted"},[(0,s._)("div",{class:"col-12 p-3"},"© 2022 Copyright: IoTeam")],-1)));function xo(e,a,o,i,t,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[Co,Do],64)}var Po={name:"Inicio",props:{autorizaciones:Object},data(){return{}}};const To=(0,f.Z)(Po,[["render",xo],["__scopeId","data-v-e104e678"]]);var jo=To;const ko=[{path:"/",name:"inicio",component:jo},{path:"/sensores",name:"sensores",component:Ya},{path:"/sugerencias",name:"sugerencias",component:wo},{path:"/:paginaNoEncontrada(.*)*",component:y}],zo=(0,V.p7)({history:(0,V.PO)("/home/"),routes:ko});zo.beforeResolve((async(e,a)=>{window.localStorage.username=e.query.usuario,window.localStorage.email=e.query.email;let o={username:e.query.usuario,email:e.query.email,rol:e.query.categoria,ultimoanio:e.query.ultimoanio,estecnico:e.query.estecnico,instituto:e.query.instituto},i=await E.validarUsuario(o).then((async e=>e));void 0!==i&&(void 0!==window.localStorage.token&&""!==window.localStorage.token||(window.localStorage.token=i,window.localStorage.autorizaciones=JSON.stringify(await E.getAutorizaciones(window.localStorage.token)))),e.fullPath=""}));var Bo=zo,Mo=o(2346),Oo=(o(8877),o(85));(0,i.ri)(I).use(Bo,C.ZP,Mo.Z,Oo.Z).mount("#app")},2965:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwABOvYAATr2ATqxVzoAAAAHdElNRQfkCAwLMQ9hEPKPAAABiklEQVRIx83VPY9MURjA8d+dmY3XZrHJfoIpRKtRXESnI0a2FN1G4yU0tEShsZ1GopDwEYRgphJahV0VBfGSRcwYa+fmKmZ29445994xJDynPf//c85znude/nVUf3N/xT57vJZMli7S8EbbeVOT4m+l0skUa3jHl6wiAlP2q0tHoJ6WxQF+zIJZicteuW67rxruUQOxu3YE8z52xOd1nIoZK6roaG9sm5fmrKZpBodveyfV80PqvRP909cy2e549Muz9rR80rBg1jdXPHfTTlUfXHAre+X+CeYLS3fJVqd1stnLBcP4Ge0wnicYxs/m42HBBn6xDA8Ljo6PhwS7PAvi0+F+GRUc1pW6YYtz6zh1DzXVs2hNOA7YLNF11UnbBu9O7CBiS2WCGYdQcUqNTNv0J3BoDsOCvXYjUvPdomtuBwatULCiK/JCy31PfMzH8wQtx23ytBgtEqx6UAauRWXcjf+vIFuDWFL4n0jExYI5c5Ne4aXlsYnlbCOXfdZHI7KkafUPC/dX4yeHS7FpTr8HNQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wOC0xMlQxMTo0OToxNSswMDowMJf82tUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDgtMTJUMTE6NDk6MTUrMDA6MDDmoWJpAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADUxMo+NU4EAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTk3MjMyOTU1Q8dOFgAAABJ0RVh0VGh1bWI6OlNpemUANjk0MEJCTl0M0wAAAEd0RVh0VGh1bWI6OlVSSQBmaWxlOi8vLi91cGxvYWRzLzU2L0lpZG5xOHYvMjQ2OS9lZGl0X21vZGlmeV9pY29uXzE0OTQ4OS5wbmeUbIoLAAAAAElFTkSuQmCC"},6654:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAI9JREFUWIXtlkEKgCAQRX8RXqmbdCzv6cpuUBuLsMxxHJFiHkhofP9jNgUoCo8FgAOwRcuFd815Kr9KNOcoo54nGQhFktz6RuGCJhSPtSTffQKfFIhHmtuLC4iiAiqgAirQXWBiZOJvem7/SvcJUAR8eM6M+4/MysieWKR/QKnL1giYcIFnFPuQNTUCyr/ZASPpP7RbDTpRAAAAAElFTkSuQmCC"},2480:function(){}},a={};function o(i){var s=a[i];if(void 0!==s)return s.exports;var t=a[i]={id:i,loaded:!1,exports:{}};return e[i].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(a,i,s,t){if(!i){var n=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],t=e[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&t||n>=t)&&Object.keys(o.O).every((function(e){return o.O[e](i[r])}))?i.splice(r--,1):(l=!1,t<n&&(n=t));if(l){e.splice(d--,1);var c=s();void 0!==c&&(a=c)}}return a}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[i,s,t]}}(),function(){o.d=function(e,a){for(var i in a)o.o(a,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(a){return 0===e[a]};var a=function(a,i){var s,t,n=i[0],l=i[1],r=i[2],c=0;if(n.some((function(a){return 0!==e[a]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(r)var d=r(o)}for(a&&a(i);c<n.length;c++)t=n[c],o.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return o.O(d)},i=self["webpackChunkportal_iot"]=self["webpackChunkportal_iot"]||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(8605)}));i=o.O(i)})();
//# sourceMappingURL=app.752d1138.js.map