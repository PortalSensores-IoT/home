(function(){var e={6426:function(e,a,o){"use strict";var t=o(9963),s=o(6252),i=o.p+"img/logoUNGS.856b4d78.png";const l={key:0,id:"loaderContainer",class:"w-100"},n=(0,s._)("div",{id:"loader",class:"spinner-border text-success",role:"status"},[(0,s._)("span",{class:"fs-1"}," IoT")],-1),r=[n],c={key:1,class:"container-fluid"},d={class:"row flex-nowrap"},u={id:"sidebarMenu",class:"col-auto col-md-2 col-xl-2 px-sm-2 px-0"},b={class:"d-flex flex-column align-items-center align-items-sm-start px-2 pt-2 text-white min-vh-100"},p=(0,s._)("span",{class:"fs-3 d-none d-sm-inline"},"IoT",-1),m=(0,s._)("br",null,null,-1),g={class:"nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start w-100",id:"menu"},S={class:"nav-item w-100"},h=(0,s._)("span",{class:"ms-1 d-none d-sm-inline"},"Inicio",-1),_={class:"nav-item w-100"},v=(0,s._)("span",{class:"ms-1 d-none d-sm-inline"},"Sensores",-1),w={class:"nav-item w-100"},f=(0,s._)("span",{class:"ms-1 d-none d-sm-inline"},"Sugerencias",-1),y={class:"nav-item w-100"},A=(0,s._)("span",{class:"ms-1 d-none d-sm-inline"},"Solicitudes",-1),D={class:"col px-0",id:"contenedorVistas"},C=(0,s.uE)('<nav class="navbar shadow-sm px-4" id="headerVistas"><a class="navbar-brand" href="#"><h4 class="my-auto">Módulo IoT</h4></a><a href="https://www.ungs.edu.ar/" target="_blank"><img src="'+i+'" width="200" height="30"></a></nav>',1),z={class:"px-4 pt-3 w-100"},k={key:2,id:"accessDenied",class:"center-0"};function T(e,a,o,t,i,n){const T=(0,s.up)("router-link"),E=(0,s.up)("font-awesome-icon"),x=(0,s.up)("router-view"),P=(0,s.up)("PaginaNoEncontrada");return i.comienzaApp?void 0!==this.autorizaciones&&""!==this.autorizaciones&&"ERR_BAD_REQUEST"!==this.autorizaciones.code&&this.comienzaApp&&!this.mostrarAccesoDenegado?((0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",d,[(0,s._)("div",u,[(0,s._)("div",b,[(0,s.Wm)(T,{to:"/",class:"d-flex align-items-center pt-3 pb-26 mb-md-0 me-md-auto text-white text-decoration-none"},{default:(0,s.w5)((()=>[p])),_:1}),m,(0,s._)("ul",g,[(0,s._)("li",S,[(0,s.Wm)(T,{to:"/",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{icon:"fa-solid fa-house"}),(0,s.Uk)(),h])),_:1})]),(0,s._)("li",_,[(0,s.Wm)(T,{to:"/sensores",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{icon:"fa-solid fa-tower-broadcast"}),(0,s.Uk)(),v])),_:1})]),(0,s._)("li",w,[(0,s.Wm)(T,{to:"/sugerencias",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{icon:"fa-solid fa-table-list"}),(0,s.Uk)(),f])),_:1})]),(0,s._)("li",y,[(0,s.Wm)(T,{to:"/solicitudes",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,s.w5)((()=>[(0,s.Wm)(E,{icon:"fa-solid fa-pen"}),(0,s.Uk)(),A])),_:1})])])])]),(0,s._)("div",D,[C,(0,s._)("div",z,[(0,s.Wm)(x,{autorizaciones:i.autorizaciones},null,8,["autorizaciones"])])])])])):this.mostrarAccesoDenegado?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)(P)])):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",l,r))}const E={id:"pageContainer"},x=(0,s.uE)('<div class="hover"><div class="background"><div class="door">IoT</div><div class="rug"></div></div><div class="foreground"><div class="bouncer"><div class="head"><div class="neck"></div><div class="eye left"></div><div class="eye right"></div><div class="ear"></div></div><div class="body"></div><div class="arm"></div></div><div class="poles"><div class="pole left"></div><div class="pole right"></div><div class="rope"></div></div></div></div>',1),P=[x];function I(e,a){return(0,s.wg)(),(0,s.iD)("div",E,P)}var R=o(3744);const O={},B=(0,R.Z)(O,[["render",I]]);var j=B,F=(o(7658),o(196));const M="https://pp1-iot.herokuapp.com/",N="Bearer ",U="api/areas",H="api/areas/ids/",L="api/areas/pisos",Z="api/tickets/",q="api/tickets",V="api/tickets/aprobar/",Y="api/tickets/desaprobar/",W="api/usuarios/user/token",K="api/usuarios/user/auth",G="api/areas/nombres/",J="api/sensores/tipos/",Q="api/sensores/ids/",$="piso ";var X={async getAreas(){let e=await F.ZP.get(M+U).then((async e=>{let a=await this.getCantidadPisos(),o=[];for(let t=0;t<a.length;t++){let a=e.data[$+t];for(let e=0;e<a.length;e++)o.push(a[e])}return o})).catch((e=>{console.log(e)}));return e},async getAreaById(e){let a=F.ZP.get(M+H+e).then((async e=>e.data)).catch((e=>{console.log(e)}));return a},async getCantidadPisos(){let e=await F.ZP.get(M+L).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async crearTicketSensor(e){let a={headers:{Authorization:N+window.sessionStorage.token}},o={tipo:e.tipo,tipoSensor:e.tipoSensor,nombreArea:e.area,descripcion:e.descripcion,idSensor:e.idSensor,urls:e.urls},t=await F.ZP.post(M+Z,o,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return t},async validarUsuario(e){let a="si"===e.ultimoanio,o="si"===e.estecnico;"directivo"===e.rol&&(e.rol=o?"TECNICO":"DIRECTIVO"),"alumno"===e.rol&&(e.rol=a?"ALUMNO_ULTIMO_ANIO ":"ALUMNO"),"admin"===e.rol&&(e.rol="ADMIN");let t={headers:{email:e.email,usuario:e.username,rol:e.rol}},s=await F.ZP.get(M+W,t).then((async e=>e.data)).catch((e=>{console.log(e)}));return s},async getAutorizaciones(e){let a={headers:{Authorization:N+e}},o=await F.ZP.get(M+K,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o},async getAreasByPiso(e){let a=await F.ZP.get(M+G+e).then((async a=>a.data[$+e])).catch((e=>{console.log(e)}));return a=a.map((e=>({id:e[0],nombre:e[1]}))),a},async getTiposDeSensores(){let e=await F.ZP.get(M+J).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async formatearTiposDeSensores(e){let a=[];for(let o=0;o<e.length;o++){let t=e[o];if("NO_IDENTIFICADO"!=t){let e=t;t=t.replaceAll("_"," "),t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),a.push({id:e,descripcion:t})}}return a},formatearString(e){return e=e.replaceAll("_"," "),e=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase(),e},async getTickets(){let e=await F.ZP.get(M+q).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async getSugerencias(){let e=await this.getTickets();const a=e.filter((e=>"SUGERENCIA"===e.tipo));return a},async getSugerenciasByEstado(e){let a=await this.getSugerencias();const o=a.filter((a=>a.estado==e));return o},async getSolicitudes(){let e=await this.getTickets();const a=e.filter((e=>"SUGERENCIA"!=e.tipo));return a},async getSolicitudesByEstado(e){let a=await this.getSolicitudes();const o=a.filter((a=>a.estado==e));return o},async aprobarTicket(e){let a={headers:{Authorization:N+window.sessionStorage.token}},o=await F.ZP.post(M+V+e,{},a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o},async rechazarTicket(e){let a={headers:{Authorization:N+window.sessionStorage.token}},o=await F.ZP.post(M+Y+e,{},a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o},async getSensorById(e){let a=await F.ZP.get(M+Q+(void 0===e?1:e)).then((async e=>e.data)).catch((e=>{console.log(e)}));return a}},ee=o(7810),ae={name:"App",components:{PaginaNoEncontrada:j},data(){return{autorizaciones:"",comienzaApp:!1,mostrarAccesoDenegado:!1,pantallaDeCarga:5e3}},methods:{},beforeMount(){setTimeout((()=>{console.log(window.sessionStorage.getItem("token")),null!=window.sessionStorage.getItem("autorizaciones")&&""!=window.sessionStorage.getItem("autorizaciones")&&"undefined"!==window.sessionStorage.getItem("autorizaciones")&&void 0!==window.sessionStorage.getItem("autorizaciones")?(this.autorizaciones=JSON.parse(window.sessionStorage.getItem("autorizaciones")),console.log(JSON.stringify(this.autorizaciones)),console.log("permiso "+this.autorizaciones.BOTON_ALTA_SUGERENCIA),this.comienzaApp=!0,this.mostrarAccesoDenegado=!1):(this.mostrarAccesoDenegado=!0,this.comienzaApp=!0)}),this.pantallaDeCarga)}};const oe=(0,R.Z)(ae,[["render",T]]);var te=oe,se=o(2201),ie=o(3577);const le={class:"card mt-2 shadow"},ne={id:"sensoresButtons",class:"card-header bg-light d-flex flex-row"},re={class:"dropdown me-2"},ce={class:"btn btn-outline-success dropdown-toggle",style:{"min-width":"154px"},type:"button",id:"pisoDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},de={class:"dropdown-menu","aria-labelledby":"pisoDropdown"},ue=["value"],be=["onClick"],pe={class:"dropdown me-2"},me={class:"btn btn-outline-success dropdown-toggle",style:{"min-width":"154px"},type:"button",id:"areaDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},ge={class:"dropdown-menu overflow-auto","aria-labelledby":"areaDropdown",style:{"max-height":"50vh"}},Se=["value"],he=["onClick"],_e=["disabled"],ve=["disabled"];function we(e,a,o,i,l,n){const r=(0,s.up)("FormAltaSensor"),c=(0,s.up)("registroTable");return(0,s.wg)(),(0,s.iD)("div",le,[(0,s._)("div",ne,[(0,s._)("div",re,[(0,s._)("button",ce,(0,ie.zw)(""===l.pisoSeleccionado?"Seleccionar piso":0===l.pisoSeleccionado?"Planta baja":l.pisoSeleccionado),1),(0,s._)("ul",de,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pisos,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,value:e},[(0,s._)("button",{class:"dropdown-item",type:"button",onClick:a=>n.seleccionarPiso(e)},(0,ie.zw)(0===e?"Planta baja":e),9,be)],8,ue)))),128))])]),(0,s._)("div",pe,[(0,s._)("button",me,(0,ie.zw)(""===l.areaSeleccionada?"Seleccionar área":l.areaSeleccionada.nombre),1),(0,s._)("ul",ge,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.areas,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,value:e},[(0,s._)("button",{class:"dropdown-item",type:"button",onClick:a=>n.seleccionarArea(e)},(0,ie.zw)(e.nombre),9,he)],8,Se)))),128))])]),(0,s._)("button",{id:"btnBuscar",disabled:""===this.areaSeleccionada,class:"btn btn-success me-2",onClick:a[0]||(a[0]=e=>n.buscarSensores())}," Buscar ",8,_e),(0,s._)("button",{id:"btnTiempoReal",disabled:""===this.areaSeleccionada,class:"btn btn-success",onClick:a[1]||(a[1]=e=>n.redireccionarSensoresEnTiempoReal())}," Ver en tiempo real ",8,ve),(0,s.wy)((0,s._)("button",{id:"btnAlta",class:"btn btn-success ms-auto","data-bs-toggle":"modal","data-bs-target":"#modalAltaSensor",onClick:a[2]||(a[2]=e=>n.obtenerTiposDeSensores())}," Solicitar alta sensor ",512),[[t.F8,this.autorizaciones.BOTON_ALTA_SENSOR]]),(0,s.Wm)(r,{tiposSensores:l.tiposSensores,pisos:l.pisos},null,8,["tiposSensores","pisos"])]),(0,s.Wm)(c,{tituloTabla:l.tituloTabla,sensoresInArea:l.sensoresInArea,autorizaciones:o.autorizaciones,areaSeleccionada:l.areaSeleccionada},null,8,["tituloTabla","sensoresInArea","autorizaciones","areaSeleccionada"])])}const fe=e=>((0,s.dD)("data-v-fa2b4a0e"),e=e(),(0,s.Cn)(),e),ye={id:"instanciasTableDiv",class:"card-body"},Ae={class:"table table-striped table-hover"},De={id:"headTable",scope:"col",colspan:"5"},Ce=fe((()=>(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"Sensor"),(0,s._)("th",{scope:"col"},"Unidad de medida"),(0,s._)("th",{scope:"col"},"Último valor registrado"),(0,s._)("th",{scope:"col"},"Frecuencia de registro (s)"),(0,s._)("th",{scope:"col"},"Estado"),(0,s._)("th",{scope:"col",colspan:"2"})],-1))),ze={id:"imgModificar"},ke=["onClick"],Te={id:"imgTacho"},Ee=["onClick"];function xe(e,a,o,i,l,n){const r=(0,s.up)("CeldaUltimoRegistro"),c=(0,s.up)("font-awesome-icon"),d=(0,s.up)("ConfirmarBajaSensor"),u=(0,s.up)("ConfirmarModificacionSensor");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",ye,[(0,s._)("table",Ae,[(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",De,(0,ie.zw)(o.tituloTabla),1)]),Ce]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.sensoresInArea,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipo)),1),(0,s._)("td",null,(0,ie.zw)(e.unidadDeMedida),1),(0,s._)("td",null,[(0,s.Wm)(r,{sensor:e},null,8,["sensor"])]),(0,s._)("td",null,(0,ie.zw)(e.registros.length>0?e.registros[e.registros.length-1].frecuencia:"-"),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.estado)),1),(0,s.wy)((0,s._)("td",ze,[(0,s._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#modalModificaSensor",onClick:a=>n.modificarSensor(e)},[(0,s.Wm)(c,{id:"btnAprobar",icon:"fa-solid fa-pen",style:{color:"#6fa363"}})],8,ke)],512),[[t.F8,this.autorizaciones.BOTON_MODIFICACION_SENSOR]]),(0,s.wy)((0,s._)("td",Te,[void 0!==o.autorizaciones?((0,s.wg)(),(0,s.iD)("button",{key:0,"data-bs-toggle":"modal","data-bs-target":"#modalBajaSensor",onClick:a=>n.eliminarSensor(e)},[(0,s.Wm)(c,{id:"btnAprobar",icon:"fa-solid fa-trash",style:{color:"#a22a2a"}})],8,Ee)):(0,s.kq)("",!0)],512),[[t.F8,this.autorizaciones.BOTON_BAJA_SENSOR]])])))),128))])])]),(0,s.Wm)(d,{bajaSensor:this.bajaSensor},null,8,["bajaSensor"]),(0,s.Wm)(u,{modificaSensor:this.modificaSensor},null,8,["modificaSensor"])],64)}const Pe={class:"modal fade",id:"modalBajaSensor",tabindex:"-1","aria-labelledby":"modalBajaSensor","aria-hidden":"false"},Ie={class:"modal-dialog"},Re={class:"modal-content"},Oe=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitud de baja de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Be={class:"modal-body"},je={class:"modal-footer"},Fe=(0,s._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),Me={class:"modal fade",id:"modalConfirmaBajaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaBajaSensor","aria-hidden":"false"},Ne={class:"modal-dialog"},Ue={class:"modal-content"},He=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando baja de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Le={class:"modal-body"},Ze={key:0,class:"spinner-border text-success",role:"status"},qe=(0,s._)("span",{class:"sr-only"},"iot",-1),Ve=[qe],Ye={key:1,class:"text-center",role:"status"};function We(e,a,o,t,i,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Pe,[(0,s._)("div",Ie,[(0,s._)("div",Re,[Oe,(0,s._)("div",Be," ¿Estás seguro que desea solicitar la baja del sensor de "+(0,ie.zw)(null!==this.bajaSensor?this.bajaSensor.tipoSensor:"")+"? ",1),(0,s._)("div",je,[Fe,(0,s._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=e=>l.enviarSolicitudBajaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaBajaSensor"}," Confirmar ")])])])]),(0,s._)("div",Me,[(0,s._)("div",Ne,[(0,s._)("div",Ue,[He,(0,s._)("div",Le,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",Ze,Ve)):((0,s.wg)(),(0,s.iD)("div",Ye,(0,ie.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Ke={props:{bajaSensor:Object},data(){return{muestraConfimacionEnvioSolicitud:!1,textoConfirmacionBaja:"",muestraSpinner:!1}},methods:{async enviarSolicitudBajaSensor(){let e=await X.crearTicketSensor(this.bajaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==e&&""!==e?"¡Solicitud de baja de sensor enviada con éxito!":"Falló el envío de la solicitud"}}};const Ge=(0,R.Z)(Ke,[["render",We]]);var Je=Ge;const Qe={class:"modal fade",id:"modalModificaSensor",tabindex:"-1","aria-labelledby":"modalModificaSensor","aria-hidden":"false"},$e={class:"modal-dialog"},Xe={class:"modal-content p-2"},ea={class:"modal-header"},aa={class:"modal-title",id:"exampleModalLabel"},oa=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),ta={class:"mb-5 col-12"},sa={class:"modal-footer"},ia=(0,s._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),la={class:"modal fade",id:"modalConfirmaModificacionSensor",tabindex:"-1","aria-labelledby":"modalConfirmaModificacionSensor","aria-hidden":"false"},na={class:"modal-dialog"},ra={class:"modal-content"},ca=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando modificacion "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),da={class:"modal-body"},ua={key:0,class:"spinner-border text-success",role:"status"},ba=(0,s._)("span",{class:"sr-only"},"iot",-1),pa=[ba],ma={key:1,class:"text-center",role:"status"};function ga(e,a,o,i,l,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Qe,[(0,s._)("div",$e,[(0,s._)("div",Xe,[(0,s._)("div",ea,[(0,s._)("h5",aa," Modificar sensor de "+(0,ie.zw)(null!==this.modificaSensor?this.modificaSensor.tipoSensor:""),1),oa]),(0,s._)("div",ta,[(0,s.wy)((0,s._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",placeholder:"Describa su modificacion","onUpdate:modelValue":a[0]||(a[0]=e=>l.descripcion=e),required:""},null,512),[[t.nr,l.descripcion]])]),(0,s._)("div",sa,[ia,(0,s._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[1]||(a[1]=e=>n.enviarSolicitudModificacionSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaModificacionSensor"}," Enviar sugerencia ")])])])]),(0,s._)("div",la,[(0,s._)("div",na,[(0,s._)("div",ra,[ca,(0,s._)("div",da,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",ua,pa)):((0,s.wg)(),(0,s.iD)("div",ma,(0,ie.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Sa={props:{modificaSensor:Object,sensoreSeleccionado:Object},data(){return{muestraSpinner:!0,textoConfirmacionBaja:"modificacionSolicitada",descripcion:""}},methods:{async enviarSolicitudModificacionSensor(){let e=this.modificaSensor;e.descripcion=this.descripcion;let a=await X.crearTicketSensor(this.modificaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==a&&""!==a?"¡Solicitud de modificacion de sensor enviado con éxito!":"Falló el envío de la solicitud"}}};const ha=(0,R.Z)(Sa,[["render",ga]]);var _a=ha;const va={key:0,class:"my-auto p-2"};function wa(e,a,o,i,l,n){return(0,s.wg)(),(0,s.j4)(t.uT,{name:"fade"},{default:(0,s.w5)((()=>[l.show?((0,s.wg)(),(0,s.iD)("p",va,(0,ie.zw)(this.ultimoRegistro),1)):(0,s.kq)("",!0)])),_:1})}var fa={name:"CeldaUltimoRegistro",props:{sensor:Object},data(){return{ultimoRegistro:"",show:!0}},mounted(){this.actualizarRegistro()},methods:{getUltimoRegistroValor(e){return e.registros?.length>0?this.getSignoUnidadDeMedida(e,e.registros[e.registros.length-1].valor):"-"},getSignoUnidadDeMedida(e,a){switch(e.unidadDeMedida){case"Porcentaje":return a+"%";case"Celcius":return a+"°C";case"Decibeles":return a+"dB";case"ppm":return a+"ppm";case"Boolean":return"PUERTA"===e.tipo||"VENTANA"===e.tipo?1==a?" Abierta":" Cerrada":1==a?" Activado":" Desactivado";case void 0:return"-"}},actualizarRegistro(){this.ultimoRegistro=this.getUltimoRegistroValor(this.sensor),setInterval((()=>{setTimeout((()=>this.show=!1),2e3),X.getSensorById(this.sensor.id).then((e=>{this.ultimoRegistro=this.getUltimoRegistroValor(e),setTimeout((()=>this.show=!0),2e3)}))}),45e3)}}};const ya=(0,R.Z)(fa,[["render",wa],["__scopeId","data-v-34eb54a2"]]);var Aa=ya,Da={name:"RegistroTable",components:{ConfirmarBajaSensor:Je,ConfirmarModificacionSensor:_a,CeldaUltimoRegistro:Aa},props:{tituloTabla:String,sensoresInArea:Object,autorizaciones:Object,areaSeleccionada:Object},data(){return{bajaSensor:null,modificaSensor:null}},methods:{getUltimoRegistroFecha(e){if(void 0!=e.registros&&null!=e.registros){let a=e.registros[e.registros.length-1];return void 0===a?"-":a.fecha}return"-"},eliminarSensor(e){let a="BAJA_SENSOR",o=e.tipo,t=this.areaSeleccionada.nombre,s=e.id;this.bajaSensor={tipo:a,tipoSensor:o,area:t,descripcion:"",idSensor:s,urls:[]}},clearSensorBaja(){this.bajaSensor=null},modificarSensor(e){let a="MODIFICAR_SENSOR",o=e.tipo,t=this.areaSeleccionada.nombre,s=e.id;this.modificaSensor={tipo:a,tipoSensor:o,area:t,descripcion:"",idSensor:s,urls:[]}},clearSensorModificacion(){this.modificaSensor=null},formatearString(e){return X.formatearString(e)}}};const Ca=(0,R.Z)(Da,[["render",xe],["__scopeId","data-v-fa2b4a0e"]]);var za=Ca;const ka=e=>((0,s.dD)("data-v-c8e679e6"),e=e(),(0,s.Cn)(),e),Ta={class:"modal fade",id:"modalAltaSensor",tabindex:"-1","aria-labelledby":"modalAltaSensor","aria-hidden":"true"},Ea={class:"modal-dialog"},xa={class:"modal-content"},Pa=ka((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Solicitud de alta de sensor")],-1))),Ia={class:"modal-body p-0 pt-2"},Ra={class:"mb-3 col-8"},Oa=ka((()=>(0,s._)("label",{for:"validationDefault04",class:"form-label"},"Tipo de sensor",-1))),Ba={id:"selectPisoPlaceholder",selected:"",hidden:""},ja=["value"],Fa={class:"mb-3 col-8"},Ma=ka((()=>(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Piso",-1))),Na={id:"selectPisoPlaceholder",selected:"",hidden:""},Ua=["value"],Ha={class:"mb-3 col-8"},La=ka((()=>(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Área",-1))),Za={id:"selectAreaPlaceholder",selected:"",hidden:""},qa=["value"],Va={id:"buttonsForms",class:"col-12 modal-footer"},Ya={class:"modal fade",id:"modalConfirmaAltaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaAltaSensor","aria-hidden":"false"},Wa={class:"modal-dialog"},Ka={class:"modal-content"},Ga=ka((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando alta de sensor "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Ja={class:"modal-body"},Qa={key:0,class:"spinner-border text-success",role:"status"},$a=ka((()=>(0,s._)("span",{class:"sr-only"},"iot",-1))),Xa=[$a],eo={key:1,class:"text-center",role:"status"};function ao(e,a,o,i,l,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Ta,[(0,s._)("div",Ea,[(0,s._)("div",xa,[Pa,(0,s._)("div",Ia,[(0,s._)("form",{class:"column",onSubmit:a[6]||(a[6]=(0,t.iM)((e=>n.limpiarForm()),["prevent"]))},[(0,s._)("div",Ra,[Oa,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.tipoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",Ba,(0,ie.zw)(l.tipoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tiposSensores,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e.descripcion},(0,ie.zw)(e.descripcion),9,ja)))),128))],512),[[t.bM,l.tipoSeleccionado]])]),(0,s._)("div",Fa,[Ma,(0,s.wy)((0,s._)("select",{onChange:a[1]||(a[1]=e=>n.obtenerAreasPorPiso()),"onUpdate:modelValue":a[2]||(a[2]=e=>l.pisoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",Na,(0,ie.zw)(l.pisoSeleccionado),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pisos,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,ie.zw)(0===e?"Planta baja":e),9,Ua)))),128))],544),[[t.bM,l.pisoSeleccionado]])]),(0,s._)("div",Ha,[La,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>l.areaSeleccionada=e),class:"form-select",id:"validationDefault04",required:""},[(0,s._)("option",Za,(0,ie.zw)(l.areaSeleccionada),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.areasCombobox,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,ie.zw)(e.nombre),9,qa)))),128))],512),[[t.bM,l.areaSeleccionada]])]),(0,s._)("div",Va,[(0,s._)("button",{id:"btnEnviarSolicitud",class:"btn btn-success btn-sm",type:"submit","data-bs-dismiss":"modal",onClick:a[4]||(a[4]=e=>n.enviarSolicitudAltaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaAltaSensor"},"Enviar solicitud"),(0,s._)("button",{id:"btnCancelarSolicitud",class:"btn btn-outline-danger btn-sm","data-bs-dismiss":"modal",onClick:a[5]||(a[5]=e=>n.limpiarForm())},"Cancelar")])],32)])])])]),(0,s._)("div",Ya,[(0,s._)("div",Wa,[(0,s._)("div",Ka,[Ga,(0,s._)("div",Ja,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",Qa,Xa)):((0,s.wg)(),(0,s.iD)("div",eo,(0,ie.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var oo={name:"FormAltaSensor",props:{tiposSensores:Object,pisos:Object},data(){return{areasCombobox:[],unidadSeleccionada:"",tipoSeleccionado:"Seleccionar tipo...",pisoSeleccionado:"Seleccionar piso...",areaSeleccionada:"Seleccionar área...",muestraSpinner:!0}},async beforeMount(){},methods:{cerrarForm(){},limpiarForm(){this.pisoSeleccionado="Seleccionar piso...",this.areaSeleccionada="Seleccionar área...",this.tipoSeleccionado="Seleccionar tipo...",this.unidadSeleccionada=""},async obtenerAreasPorPiso(){this.areasCombobox=await X.getAreasByPiso(this.pisoSeleccionado)},async enviarSolicitudAltaSensor(){let e="ALTA_SENSOR",a=this.tipoSeleccionado.toUpperCase().replaceAll(" ","_"),o=this.areaSeleccionada;this.altaSensor={tipo:e,tipoSensor:a,area:o.nombre,descripcion:"",idSensor:"",urls:[]};let t=await X.crearTicketSensor(this.altaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==t&&""!==t?"¡Solicitud de alta de sensor enviado con éxito!":"Falló el envío de la solicitud"}}};const to=(0,R.Z)(oo,[["render",ao],["__scopeId","data-v-c8e679e6"]]);var so=to,io={name:"Sensores",components:{RegistroTable:za,FormAltaSensor:so},props:{autorizaciones:Object},data(){return{pisos:[],areas:[],areasCombox:[],tiposSensores:[],pisoSeleccionado:"",areaSeleccionada:"",sensoresInArea:null,tituloTabla:"Tabla de sensores "}},async beforeMount(){await this.cargarDatos()},methods:{async cargarDatos(){this.pisos=await X.getCantidadPisos()},async buscarSensores(){this.setTituloTabla();let e=await X.getAreaById(this.areaSeleccionada.id);this.sensoresInArea=e.sensores},setTituloTabla(){"Área..."!=this.areaSeleccionada&&"Piso..."!=this.pisoSeleccionado&&(this.tituloTabla="Tabla de sensores:  "+this.areaSeleccionada.nombre+" - Piso "+(0==this.pisoSeleccionado?"Planta baja":this.pisoSeleccionado))},redireccionarSensoresEnTiempoReal(){window.open("https://www.iot-pp1.click/ui/#!/0?area="+this.areaSeleccionada.nombre.replaceAll(" ","_"),"_blank")},async obtenerTiposDeSensores(){this.tiposSensores=await X.formatearTiposDeSensores(await X.getTiposDeSensores())},async seleccionarPiso(e){this.areaSeleccionada="",this.pisoSeleccionado=e,this.areas=await X.getAreasByPiso(this.pisoSeleccionado)},seleccionarArea(e){this.areaSeleccionada=e}}};const lo=(0,R.Z)(io,[["render",we],["__scopeId","data-v-1337add7"]]);var no=lo;const ro=e=>((0,s.dD)("data-v-1b13a7c1"),e=e(),(0,s.Cn)(),e),co={class:"nav nav-tabs mt-2",id:"myTab",role:"tablist"},uo={class:"nav-item",role:"presentation"},bo={class:"nav-link active",id:"cardSolicitudesPendientes-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesPendientes",type:"button",role:"tab","aria-controls":"cardSolicitudesPendientes","aria-selected":"true"},po={class:"nav-item",role:"presentation"},mo={class:"nav-link",id:"cardSolicitudesCerradas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesCerradas",type:"button",role:"tab","aria-controls":"cardSolicitudesCerradas","aria-selected":"false"},go={class:"nav-item",role:"presentation"},So={class:"nav-link",id:"cardSolicitudesAprobadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesAprobadas",type:"button",role:"tab","aria-controls":"cardSolicitudesAprobadas","aria-selected":"false"},ho={class:"nav-item",role:"presentation"},_o={class:"nav-link",id:"cardSolicitudesRechazadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesRechazadas",type:"button",role:"tab","aria-controls":"cardSolicitudesRechazadas","aria-selected":"false"},vo={class:"tab-content shadow",id:"myTabContent"},wo={id:"cardSolicitudesPendientes",class:"card tab-pane show active overflow-auto",role:"tabpanel","aria-labelledby":"cardSolicitudesPendientes-tab"},fo=ro((()=>(0,s._)("div",{id:"cardSolicitudesPendientesHeader",class:"card-header py-3"},[(0,s._)("b",null,"Solicitudes pendientes")],-1))),yo={class:"card-body"},Ao={class:"table table-striped table-hover"},Do=ro((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de solicitud"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{colspan:"2",scope:"col"})])],-1))),Co={class:"p-auto",scope:"row"},zo={align:"center"},ko=["onClick"],To={id:"solicitudButtons",align:"right"},Eo=["onClick"],xo=["onClick"],Po={id:"cardSolicitudesCerradas",class:"card tab-pane overflow-auto",role:"tabpanel","aria-labelledby":"cardSolicitudesCerradas-tab"},Io=ro((()=>(0,s._)("div",{class:"card-header py-3"},[(0,s._)("b",null,"Solicitudes cerradas")],-1))),Ro={class:"card-body"},Oo={class:"table table-striped table-hover"},Bo=ro((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de solicitud"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{scope:"col"})])],-1))),jo={scope:"row"},Fo={align:"center"},Mo=["onClick"],No={id:"cardSolicitudesRechazadas",class:"card tab-pane overflow-auto",role:"tabpanel","aria-labelledby":"cardSolicitudesRechazadas-tab"},Uo=ro((()=>(0,s._)("div",{class:"card-header py-3"},[(0,s._)("b",null,"Solicitudes rechazadas")],-1))),Ho={class:"card-body"},Lo={class:"table table-striped table-hover"},Zo=ro((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de solicitud"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{scope:"col"})])],-1))),qo={scope:"row"},Vo={align:"center"},Yo=["onClick"],Wo={id:"cardSolicitudesAprobadas",class:"card tab-pane overflow-auto",role:"tabpanel","aria-labelledby":"cardSolicitudesAprobadas-tab"},Ko=ro((()=>(0,s._)("div",{class:"card-header py-3"},[(0,s._)("b",null,"Solicitudes aprobadas")],-1))),Go={class:"card-body"},Jo={class:"table table-striped table-hover"},Qo=ro((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de solicitud"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{scope:"col"})])],-1))),$o={scope:"row"},Xo={align:"center"},et=["onClick"],at={class:"modal fade",id:"modalDetalleSolicitud",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ot={class:"modal-dialog"},tt={class:"modal-content"},st=ro((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Detalle solicitud")],-1))),it={class:"modal-body"},lt=ro((()=>(0,s._)("h6",{class:"card-title"},"Descripción:",-1))),nt={class:"card-text"},rt=ro((()=>(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-outline-success","data-bs-dismiss":"modal"},"Close")],-1)));function ct(e,a,o,i,l,n){const r=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("ul",co,[(0,s._)("li",uo,[(0,s.wy)((0,s._)("button",bo,"Pendientes",512),[[t.F8,o.autorizaciones.TABLA_SOLICITUDES_PENDIENTES]])]),(0,s.wy)((0,s._)("li",po,[(0,s.wy)((0,s._)("button",mo,"Cerradas",512),[[t.F8,o.autorizaciones.TABLA_SOLICITUDES_CERRADAS]])],512),[[t.F8,!1]]),(0,s._)("li",go,[(0,s.wy)((0,s._)("button",So,"Aprobadas",512),[[t.F8,o.autorizaciones.TABLA_SOLICITUDES_ACEPTADAS]])]),(0,s.wy)((0,s._)("li",ho,[(0,s.wy)((0,s._)("button",_o,"Rechazadas",512),[[t.F8,o.autorizaciones.TABLA_SOLICITUDES_RECHAZADAS]])],512),[[t.F8,l.esTecnico]])]),(0,s._)("div",vo,[(0,s._)("div",wo,[fo,(0,s._)("div",yo,[(0,s._)("table",Ao,[Do,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.solicitudesPendientes,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",Co,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",zo,[(0,s.wy)((0,s._)("button",{onClick:a=>n.verDetalleSolicitud(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSolicitud"}," Ver descripción ",8,ko),[[t.F8,"MODIFICAR_SENSOR"===e.tipo]])]),(0,s.wy)((0,s._)("td",To,[(0,s.wy)((0,s._)("button",{onClick:a=>n.aprobarSolicitud(e.id)},[(0,s.Wm)(r,{id:"btnAprobar",icon:"fa-solid fa-check"})],8,Eo),[[t.F8,o.autorizaciones.BOTON_ACEPTA_SOLICITUD_SENSOR]]),(0,s.wy)((0,s._)("button",{onClick:a=>n.rechazarSolicitud(e.id)},[(0,s.Wm)(r,{id:"btnRechazar",icon:"fa-solid fa-xmark"})],8,xo),[[t.F8,o.autorizaciones.BOTON_RECHAZA_SOLICITUD_SENSOR]])],512),[[t.F8,l.esTecnico]])])))),128))])])])]),(0,s._)("div",Po,[Io,(0,s._)("div",Ro,[(0,s._)("table",Oo,[Bo,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.solicitudesCerradas,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",jo,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",Fo,[(0,s.wy)((0,s._)("button",{onClick:a=>n.verDetalleSolicitud(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSolicitud"}," Ver descripción ",8,Mo),[[t.F8,"MODIFICAR_SENSOR"===e.tipo]])])])))),128))])])])]),(0,s._)("div",No,[Uo,(0,s._)("div",Ho,[(0,s._)("table",Lo,[Zo,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.solicitudesRechazadas,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",qo,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",Vo,[(0,s.wy)((0,s._)("button",{onClick:a=>n.verDetalleSolicitud(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSolicitud"}," Ver descripción ",8,Yo),[[t.F8,"MODIFICAR_SENSOR"===e.tipo]])])])))),128))])])])]),(0,s._)("div",Wo,[Ko,(0,s._)("div",Go,[(0,s._)("table",Jo,[Qo,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.solicitudesAprobadas,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",$o,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",Xo,[(0,s.wy)((0,s._)("button",{onClick:a=>n.verDetalleSolicitud(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSolicitud"}," Ver descripción ",8,et),[[t.F8,"MODIFICAR_SENSOR"===e.tipo]])])])))),128))])])])])]),(0,s._)("div",at,[(0,s._)("div",ot,[(0,s._)("div",tt,[st,(0,s._)("div",it,[lt,(0,s._)("p",nt,(0,ie.zw)(l.solicitudSeleccionada.descripcion),1)]),rt])])])],64)}var dt={name:"Solicitudes",props:{autorizaciones:Object},data(){return{solicitudes:[],solicitudesPendientes:[],solicitudesCerradas:[],solicitudesAprobadas:[],solicitudesRechazadas:[],esTecnico:!1,solicitudSeleccionada:{}}},async beforeMount(){"directivo"==window.sessionStorage.getItem("rol")&&(this.esTecnico=!0),await this.cargarDatos()},methods:{async obtenerSolicitudes(){this.solicitudes=await X.getSolicitudes()},async cargarDatos(){await this.obtenerSolicitudes(),this.solicitudesPendientes=this.filtrarSolicitudesPorEstado("ABIERTA"),this.solicitudesCerradas=this.filtrarSolicitudesPorEstado("CERRADA"),this.solicitudesAprobadas=this.filtrarSolicitudesPorEstado("APROBADA"),this.solicitudesRechazadas=this.filtrarSolicitudesPorEstado("DESAPROBADA")},async aprobarSolicitud(e){await X.aprobarTicket(e).then((e=>{this.cargarDatos()}))},async rechazarSolicitud(e){await X.rechazarTicket(e).then((e=>{this.cargarDatos()}))},verDetalleSolicitud(e){this.solicitudSeleccionada=e},filtrarSolicitudesPorEstado(e){let a=this.solicitudes.filter((a=>a.estado==e));return a},formatearString(e){return X.formatearString(e)}}};const ut=(0,R.Z)(dt,[["render",ct],["__scopeId","data-v-1b13a7c1"]]);var bt=ut;const pt=e=>((0,s.dD)("data-v-d54374d4"),e=e(),(0,s.Cn)(),e),mt={id:"btnEnviarSugerencia",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalAltaSugerencia"},gt={class:"nav nav-tabs mt-2",id:"myTab",role:"tablist"},St={class:"nav-item",role:"presentation"},ht={class:"nav-link active",id:"cardSugerenciasPendientes-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasPendientes",type:"button",role:"tab","aria-controls":"cardSugerenciasPendientes","aria-selected":"true"},_t={class:"nav-item",role:"presentation"},vt={class:"nav-link",id:"cardSugerenciasCerradas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasCerradas",type:"button",role:"tab","aria-controls":"cardSugerenciasCerradas","aria-selected":"false"},wt={class:"nav-item",role:"presentation"},ft={class:"nav-link",id:"cardSugerenciasAprobadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasAprobadas",type:"button",role:"tab","aria-controls":"cardSugerenciasAprobadas","aria-selected":"false"},yt={class:"nav-item",role:"presentation"},At={class:"nav-link",id:"cardSugerenciasRechazadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasRechazadas",type:"button",role:"tab","aria-controls":"cardSugerenciasRechazadas","aria-selected":"false"},Dt={class:"tab-content shadow",id:"myTabContent"},Ct={id:"cardSugerenciasPendientes",class:"card tab-pane fade show active overflow-auto",role:"tabpanel","aria-labelledby":"cardSugerenciasPendientes-tab"},zt=pt((()=>(0,s._)("div",{id:"cardSugerenciasPendientesHeader",class:"card-header py-3"},[(0,s._)("b",null,"Sugerencias pendientes")],-1))),kt={class:"card-body"},Tt={class:"table table-striped table-hover"},Et=pt((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{colspan:"2",scope:"col"})])],-1))),xt={scope:"row"},Pt={align:"center"},It=["onClick"],Rt={id:"sugerenciaButtons",align:"right"},Ot=["onClick"],Bt=["onClick"],jt={id:"cardSugerenciasCerradas",class:"card tab-pane fade overflow-auto",role:"tabpanel","aria-labelledby":"cardSugerenciasCerradas-tab"},Ft=pt((()=>(0,s._)("div",{class:"card-header py-3"},[(0,s._)("b",null,"Sugerencias cerradas")],-1))),Mt={class:"card-body"},Nt={class:"table table-striped table-hover"},Ut=pt((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{scope:"col"})])],-1))),Ht={scope:"row"},Lt={align:"center"},Zt=["onClick"],qt={id:"cardSugerenciasRechazadas",class:"card tab-pane fade overflow-auto",role:"tabpanel","aria-labelledby":"cardSugerenciasRechazadas-tab"},Vt=pt((()=>(0,s._)("div",{class:"card-header py-3"},[(0,s._)("b",null,"Sugerencias rechazadas")],-1))),Yt={class:"card-body"},Wt={class:"table table-striped table-hover"},Kt=pt((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{scope:"col"})])],-1))),Gt={scope:"row"},Jt={align:"center"},Qt=["onClick"],$t={id:"cardSugerenciasAprobadas",class:"card tab-pane fade overflow-auto",role:"tabpanel","aria-labelledby":"cardSugerenciasAprobadas-tab"},Xt=pt((()=>(0,s._)("div",{class:"card-header py-3"},[(0,s._)("b",null,"Sugerencias aprobadas")],-1))),es={class:"card-body"},as={class:"table table-striped table-hover"},os=pt((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"ID"),(0,s._)("th",{scope:"col"},"Tipo de sensor"),(0,s._)("th",{scope:"col"},"Área"),(0,s._)("th",{scope:"col"},"Fecha"),(0,s._)("th",{scope:"col"},"Autor"),(0,s._)("th",{scope:"col"})])],-1))),ts={scope:"row"},ss={align:"center"},is=["onClick"],ls={class:"modal fade",id:"modalDetalleSugerencia",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ns={class:"modal-dialog"},rs={class:"modal-content"},cs=pt((()=>(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Detalle sugerencia")],-1))),ds={class:"modal-body"},us=pt((()=>(0,s._)("h6",{class:"card-title"},"Descripción:",-1))),bs={class:"card-text"},ps=["src"],ms=pt((()=>(0,s._)("div",{class:"modal-footer"},[(0,s._)("button",{type:"button",class:"btn btn-outline-success","data-bs-dismiss":"modal"},"Close")],-1)));function gs(e,a,o,i,l,n){const r=(0,s.up)("font-awesome-icon"),c=(0,s.up)("FormAltaSugerencia");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.wy)((0,s._)("button",mt," Realizar sugerencia ",512),[[t.F8,this.autorizaciones.BOTON_ALTA_SUGERENCIA]]),(0,s._)("ul",gt,[(0,s._)("li",St,[(0,s.wy)((0,s._)("button",ht,"Pendientes",512),[[t.F8,o.autorizaciones.TABLA_SUGERENCIAS_PENDIENTES]])]),(0,s.wy)((0,s._)("li",_t,[(0,s.wy)((0,s._)("button",vt,"Cerradas",512),[[t.F8,o.autorizaciones.TABLA_SUGERENCIAS_CERRADAS]])],512),[[t.F8,!1]]),(0,s._)("li",wt,[(0,s.wy)((0,s._)("button",ft,"Aprobadas",512),[[t.F8,o.autorizaciones.TABLA_SUGERENCIAS_ACEPTADAS]])]),(0,s.wy)((0,s._)("li",yt,[(0,s.wy)((0,s._)("button",At,"Rechazadas",512),[[t.F8,o.autorizaciones.TABLA_SUGERENCIAS_RECHAZADAS]])],512),[[t.F8,this.esDirectivo]])]),(0,s._)("div",Dt,[(0,s._)("div",Ct,[zt,(0,s._)("div",kt,[(0,s._)("table",Tt,[Et,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.sugerenciasPendientes,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",xt,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",Pt,[(0,s._)("button",{onClick:a=>n.verDetalleSugerencia(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSugerencia"}," Ver detalle ",8,It)]),(0,s.wy)((0,s._)("td",Rt,[(0,s.wy)((0,s._)("button",{onClick:a=>n.aprobarSugerencia(e.id)},[(0,s.Wm)(r,{id:"btnAprobar",icon:"fa-solid fa-check"})],8,Ot),[[t.F8,o.autorizaciones.BOTON_ACEPTA_SUGERENCIA]]),(0,s.wy)((0,s._)("button",{onClick:a=>n.rechazarSugerencia(e.id)},[(0,s.Wm)(r,{id:"btnRechazar",icon:"fa-solid fa-xmark"})],8,Bt),[[t.F8,o.autorizaciones.BOTON_RECHAZO_SUGERENCIA]])],512),[[t.F8,l.esDirectivo]])])))),128))])])])]),(0,s._)("div",jt,[Ft,(0,s._)("div",Mt,[(0,s._)("table",Nt,[Ut,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.sugerenciasCerradas,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",Ht,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",Lt,[(0,s._)("button",{onClick:a=>n.verDetalleSugerencia(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSugerencia"}," Ver detalle ",8,Zt)])])))),128))])])])]),(0,s._)("div",qt,[Vt,(0,s._)("div",Yt,[(0,s._)("table",Wt,[Kt,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.sugerenciasRechazadas,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",Gt,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",Jt,[(0,s._)("button",{onClick:a=>n.verDetalleSugerencia(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSugerencia"}," Ver detalle ",8,Qt)])])))),128))])])])]),(0,s._)("div",$t,[Xt,(0,s._)("div",es,[(0,s._)("table",as,[os,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.sugerenciasAprobadas,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("th",ts,(0,ie.zw)(e.id),1),(0,s._)("td",null,(0,ie.zw)(this.formatearString(e.tipoSensor)),1),(0,s._)("td",null,(0,ie.zw)(e.nombreArea),1),(0,s._)("td",null,(0,ie.zw)(e.fecha),1),(0,s._)("td",null,(0,ie.zw)(e.appUsuario.nombre),1),(0,s._)("td",ss,[(0,s._)("button",{onClick:a=>n.verDetalleSugerencia(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSugerencia"}," Ver detalle ",8,is)])])))),128))])])])])]),(0,s.Wm)(c),(0,s._)("div",ls,[(0,s._)("div",ns,[(0,s._)("div",rs,[cs,(0,s._)("div",ds,[us,(0,s._)("p",bs,(0,ie.zw)(l.sugerenciaSeleccionada.descripcion),1),(0,s._)("iframe",{height:"400",width:"568",src:l.sugerenciaSeleccionada.urls[0]},"\r\n\r\n            ",8,ps)]),ms])])])],64)}const Ss={class:"modal fade",id:"modalAltaSugerencia",tabindex:"-1","aria-labelledby":"modalAltaSugerencia","aria-hidden":"true"},hs={class:"modal-dialog"},_s=(0,s._)("div",{class:"modal-header"},null,-1),vs={class:"modal-content p-3"},ws=(0,s._)("div",{class:"d-flex flex-row justify-content-between mb-2"},[(0,s._)("h3",{class:"card-header card-title"},"Complete los datos"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),fs=(0,s._)("p",{class:""},"Todos los datos son obligatorios, debe indicar el lugar y el tipo de sensor sobre el que quiere realizar una sugerencia",-1),ys={id:"detalleSugerencia"},As={class:"mb-3 col-12"},Ds=(0,s._)("label",{for:"validationDefault05",class:"form-label"}," Piso* ",-1),Cs={class:"form-select d-flex",style:{"min-width":"154px"},type:"button",id:"pisoDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},zs={class:"dropdown-menu","aria-labelledby":"pisoDropdown",style:{width:"93% !important"}},ks=["value"],Ts=["onClick"],Es={class:"mb-3 col-12"},xs=(0,s._)("label",{for:"validationDefault05",class:"form-label"}," Área* ",-1),Ps={class:"form-select d-flex",style:{"min-width":"154px"},type:"button",id:"areaDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},Is={class:"dropdown-menu overflow-auto","aria-labelledby":"areaDropdown",style:{width:"93% !important","max-height":"50vh"}},Rs=["value"],Os=["onClick"],Bs={class:"mb-3 col-12"},js=(0,s._)("label",{for:"validationDefault05",class:"form-label"}," Tipo de sensor* ",-1),Fs={class:"form-select d-flex",style:{"min-width":"154px"},type:"button",id:"areaDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},Ms={class:"dropdown-menu overflow-auto","aria-labelledby":"areaDropdown",style:{width:"93% !important","max-height":"50vh"}},Ns=["value"],Us=["onClick"],Hs={class:"col-auto",id:"btnAltaSugerencia"},Ls=["disabled"];function Zs(e,a,o,i,l,n){const r=(0,s.up)("ConfiguracionIFrame");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Ss,[(0,s._)("div",hs,[_s,(0,s._)("div",vs,[ws,fs,(0,s._)("form",{class:"mx-30 needs-validation",onSubmit:a[0]||(a[0]=(0,t.iM)((()=>{}),["prevent"]))},[(0,s._)("div",ys,[(0,s._)("div",As,[Ds,(0,s._)("button",Cs,(0,ie.zw)(""===l.pisoSeleccionado?"Seleccionar piso":0===l.pisoSeleccionado?"Planta baja":l.pisoSeleccionado),1),(0,s._)("ul",zs,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.pisos,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,value:e},[(0,s._)("button",{class:"dropdown-item",type:"button",onClick:a=>n.seleccionarPiso(e)},(0,ie.zw)(0===e?"Planta baja":e),9,Ts)],8,ks)))),128))])]),(0,s._)("div",Es,[xs,(0,s._)("button",Ps,(0,ie.zw)(""===l.areaSeleccionada?"Seleccionar área":l.areaSeleccionada.nombre),1),(0,s._)("ul",Is,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.areas,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,value:e},[(0,s._)("button",{class:"dropdown-item",type:"button",onClick:a=>n.seleccionarArea(e)},(0,ie.zw)(e.nombre),9,Os)],8,Rs)))),128))])]),(0,s._)("div",Bs,[js,(0,s._)("button",Fs,(0,ie.zw)(""===l.tipoSensorSeleccionado?"Seleccionar área":l.tipoSensorSeleccionado),1),(0,s._)("ul",Ms,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tiposSensores,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,value:e},[(0,s._)("button",{class:"dropdown-item",type:"button",onClick:a=>n.seleccionarTipoSensor(e.id)},(0,ie.zw)(e.id),9,Us)],8,Ns)))),128))])])]),(0,s._)("div",Hs,[(0,s._)("button",{id:"btnSiguienteFormAltaSugerencia",class:"float-right btn btn-success","data-bs-toggle":"modal","data-bs-target":"#ConfiguracionIFrameForm",disabled:l.formValido,style:{float:"right !important"}}," Siguiente ",8,Ls)])],32)])])]),(0,s.Wm)(r,{tipoSensorSeleccionado:l.tipoSensorSeleccionado,areaSeleccionada:l.areaSeleccionada},null,8,["tipoSensorSeleccionado","areaSeleccionada"])],64)}const qs={class:"modal fade",id:"ConfiguracionIFrameForm",tabindex:"-1","aria-labelledby":"modalIFrameLabelledby","aria-hidden":"true"},Vs={class:"modal-dialog"},Ys={class:"modal-content p-3"},Ws=(0,s._)("div",{class:"d-flex flex-row justify-content-between mb-2"},[(0,s._)("h3",{class:"card-header card-title"},"Indique el periodo"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ks=(0,s._)("p",null,"Todos los campos son obligatorios, debe elegir un periodo para realizar una sugerencia",-1),Gs={class:"col-12"},Js={class:"mb-3 col-12"},Qs=(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Año",-1),$s=["value"],Xs=["value"],ei={class:"mb-3 col-12"},ai=(0,s._)("label",{for:"validationDefault05",class:"form-label"},"Mes",-1),oi=["value"],ti=["value"],si={class:"col-auto"},ii=["disabled"];function li(e,a,o,i,l,n){const r=(0,s.up)("EnvioFormAltaSugerencia");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",qs,[(0,s._)("div",Vs,[(0,s._)("div",Ys,[Ws,Ks,(0,s._)("form",{class:"",onSubmit:a[5]||(a[5]=(0,t.iM)((()=>{}),["prevent"]))},[(0,s._)("div",Gs,[(0,s._)("div",Js,[Qs,(0,s.wy)((0,s._)("select",{onChange:a[0]||(a[0]=e=>n.placeHolderAnio()),"onUpdate:modelValue":a[1]||(a[1]=e=>l.anioSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s.wy)((0,s._)("option",{selected:"",value:l.anioSeleccionado},(0,ie.zw)(l.anioSeleccionado),9,$s),[[t.F8,l.mostrarPlaceHolderAnio]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.anios,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,ie.zw)(e),9,Xs)))),128))],544),[[t.bM,l.anioSeleccionado]])]),(0,s._)("div",ei,[ai,(0,s.wy)((0,s._)("select",{onChange:a[2]||(a[2]=e=>n.placeHolderMes()),"onUpdate:modelValue":a[3]||(a[3]=e=>l.mesSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,s.wy)((0,s._)("option",{selected:"",value:l.mesSeleccionado},(0,ie.zw)(n.getNombreMes(l.mesSeleccionado)),9,oi),[[t.F8,l.mostrarPlaceHolderMes]]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.meses,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,ie.zw)(n.getNombreMes(e)),9,ti)))),128))],544),[[t.bM,l.mesSeleccionado]])]),(0,s._)("div",si,[(0,s._)("button",{onClick:a[4]||(a[4]=e=>n.armarURL()),type:"submit",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalEnvioSugerencia",disabled:l.formValido,style:{float:"right !important"}}," Siguiente ",8,ii)])])],32)])])]),(0,s.Wm)(r,{url:l.url,areaSeleccionada:this.areaSeleccionada,tipoSensorSeleccionado:o.tipoSensorSeleccionado},null,8,["url","areaSeleccionada","tipoSensorSeleccionado"])],64)}const ni={class:"modal fade",id:"modalEnvioSugerencia",tabindex:"-1","aria-labelledby":"modalEnvioSugerencia","aria-hidden":"true"},ri={class:"modal-dialog"},ci={class:"modal-content p-3"},di=(0,s._)("div",{class:"d-flex flex-row justify-content-between mb-2"},[(0,s._)("h3",{class:"card-header card-title"},"Solicitud de sugerencia"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ui=(0,s._)("p",null,"Escriba su sugerencia para seguir mejorando la institución",-1),bi={class:"col-12"},pi=["src"],mi={class:"col-12 mb-2"},gi=["disabled"],Si={class:"modal fade",id:"modalEnviarAltaSugerencia",tabindex:"-1","aria-labelledby":"modalEnviarAltaSugerenciaLabel","aria-hidden":"false"},hi={class:"modal-dialog"},_i={class:"modal-content"},vi=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Realizando sugerencia "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),wi={class:"modal-body"},fi={key:0,class:"spinner-border text-success",role:"status"},yi=(0,s._)("span",{class:"sr-only"},"iot",-1),Ai=[yi],Di={key:1,class:"text-center",role:"status"};function Ci(e,a,o,i,l,n){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",ni,[(0,s._)("div",ri,[(0,s._)("div",ci,[di,ui,(0,s._)("form",{class:"",onSubmit:a[2]||(a[2]=(0,t.iM)((()=>{}),["prevent"]))},[(0,s._)("div",bi,[(0,s._)("iframe",{class:"col-12 mb-2",height:"300",width:"400",src:this.url},null,8,pi),(0,s._)("div",mi,[(0,s.wy)((0,s._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",placeholder:"Escriba su sugerencia","onUpdate:modelValue":a[0]||(a[0]=e=>l.descripcion=e),required:""},null,512),[[t.nr,l.descripcion]])]),(0,s._)("button",{onClick:a[1]||(a[1]=e=>n.enviarSugerencia()),class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalEnviarAltaSugerencia",disabled:""==l.descripcion,style:{float:"right !important"}}," Enviar sugerencia ",8,gi)])],32)])])]),(0,s._)("div",Si,[(0,s._)("div",hi,[(0,s._)("div",_i,[vi,(0,s._)("div",wi,[this.muestraSpinner?((0,s.wg)(),(0,s.iD)("div",fi,Ai)):((0,s.wg)(),(0,s.iD)("div",Di,(0,ie.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var zi={name:"EnvioFormAltaSugerencia",props:{url:String,areaSeleccionada:String,tipoSensorSeleccionado:String},data(){return{descripcion:"",muestraSpinner:!0,textoConfirmacionBaja:""}},methods:{async enviarSugerencia(){let e=[];e.push(this.url);let a={tipo:"SUGERENCIA",area:this.areaSeleccionada.nombre,tipoSensor:this.tipoSensorSeleccionado.toUpperCase().replaceAll(" ","_"),descripcion:this.descripcion,idSensor:null,urls:e},o=await X.crearTicketSensor(a);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==o&&""!==o?"¡Sugerencia enviada con éxito!":"Falló el envío de la sugerencia"},"nuevaPestañaGrafico"(){window.open(this.url,"_blank")}}};const ki=(0,R.Z)(zi,[["render",Ci]]);var Ti=ki,Ei={components:{EnvioFormAltaSugerencia:Ti},name:"ConfiguracionIFrame",props:{areaSeleccionada:Object,tipoSensorSeleccionado:String},data(){return{meses:[1,2,3,4,5,6,7,8,9,10,11,12],anios:[],mesSeleccionado:"Seleccione mes",anioSeleccionado:"Seleccione año",url:"",mostrarPlaceHolderMes:!0,mostrarPlaceHolderAnio:!0,formValido:!0}},beforeMount(){this.getAnios()},methods:{getAnios(){for(let e=2022;e>=2e3;e--)this.anios.push(e)},getNombreMes(e){switch(e){case 1:return"Enero";case 2:return"Febrero";case 3:return"Marzo";case 4:return"Abril";case 5:return"Mayo";case 6:return"Junio";case 7:return"Julio";case 8:return"Agosto";case 9:return"Septiembre";case 10:return"Octubre";case 11:return"Noviembre";case 12:return"Diciembre";default:return e}},armarURL(){this.url="https://pp1.ath.cx:8443/public/question/ca147253-9337-4489-bcbd-c5e9d43e7d27?anio="+this.anioSeleccionado+"&mes="+this.mesSeleccionado+"&areaId="+this.areaSeleccionada.id+"&tipoSensor="+this.tipoSensorSeleccionado.replaceAll(" ","_")+"#hide_parameters=anio,mes,areaId,tipoSensor"},placeHolderAnio(){this.mostrarPlaceHolderAnio=!1,this.validarForm()},placeHolderMes(){this.mostrarPlaceHolderMes=!1,this.validarForm()},validarForm(){this.formValido=this.mostrarPlaceHolderAnio||this.mostrarPlaceHolderMes}}};const xi=(0,R.Z)(Ei,[["render",li]]);var Pi=xi,Ii={name:"FormAltaSugerencia",components:{ConfiguracionIFrame:Pi},data(){return{pisos:[],areas:[],tiposSensores:[],pisoSeleccionado:"",areaSeleccionada:"",tipoSensorSeleccionado:"",mostrarPlaceHolderArea:!0,mostrarPlaceHolderPiso:!0,mostrarPlaceHolderTipoSensor:!0,formValido:!0}},async beforeMount(){this.pisos=await X.getCantidadPisos(),this.tiposSensores=await X.formatearTiposDeSensores(await X.getTiposDeSensores())},methods:{validarCampos(){this.formValido=this.mostrarPlaceHolderPiso||this.mostrarPlaceHolderArea||this.mostrarPlaceHolderTipoSensor},async seleccionarPiso(e){this.areaSeleccionada="",this.mostrarPlaceHolderArea=!0,this.pisoSeleccionado=e,this.areas=await X.getAreasByPiso(this.pisoSeleccionado),this.mostrarPlaceHolderPiso=!1,this.validarCampos()},seleccionarArea(e){this.areaSeleccionada=e,this.mostrarPlaceHolderArea=!1,this.validarCampos()},seleccionarTipoSensor(e){this.tipoSensorSeleccionado=e,this.mostrarPlaceHolderTipoSensor=!1,this.validarCampos()}}};const Ri=(0,R.Z)(Ii,[["render",Zs]]);var Oi=Ri,Bi={name:"Sugerencias",components:{FormAltaSugerencia:Oi},props:{autorizaciones:Object},data(){return{pisos:[],areas:[],pisoSeleccionado:"",areaSeleccionada:"",tiposSensores:["Temperatura","Puerta","Humedad","Calidad de Aire","Proximidad","Humo","Gas","Nivel de ruido"],sugerenciasPendientes:[],sugerenciasCerradas:[],sugerenciasAprobadas:[],sugerenciasRechazadas:[],sugerenciaSeleccionada:{urls:[""]},esDirectivo:!1}},async beforeMount(){this.cargarDatos(),"directivo"==window.sessionStorage.getItem("rol")&&(this.esDirectivo=!0)},methods:{enviarSugerencia:function(e){e&&e.preventDefault()},async cargarDatos(){this.pisos=await X.getCantidadPisos(),this.sugerenciasPendientes=await X.getSugerenciasByEstado("ABIERTA"),this.sugerenciasCerradas=await X.getSugerenciasByEstado("CERRADA"),this.sugerenciasAprobadas=await X.getSugerenciasByEstado("APROBADA"),this.sugerenciasRechazadas=await X.getSugerenciasByEstado("DESAPROBADA")},async obtenerAreasPorPiso(){this.areas=await X.getAreasByPiso(this.pisoSeleccionado)},async aprobarSugerencia(e){await X.aprobarTicket(e).then((e=>{this.cargarDatos()}))},async rechazarSugerencia(e){await X.rechazarTicket(e).then((e=>{this.cargarDatos()}))},verDetalleSugerencia(e){this.sugerenciaSeleccionada=e,setTimeout((function(){}),1e3)},formatearString(e){return X.formatearString(e)}}};const ji=(0,R.Z)(Bi,[["render",gs],["__scopeId","data-v-d54374d4"]]);var Fi=ji,Mi=o.p+"img/inicio2.9ff1804e.png";const Ni=e=>((0,s.dD)("data-v-fe458434"),e=e(),(0,s.Cn)(),e),Ui={id:"inicioBox",class:"d-flex flex-row align-items-center h-100"},Hi=Ni((()=>(0,s._)("div",{class:"d-flex flex-column h-75 mt-15 w-50"},[(0,s._)("h1",null,"¡Bienvenido!"),(0,s._)("p",{class:"blockquote"},[(0,s.Uk)(" El Internet de las cosas describe objetos físicos con sensores, capacidad de procesamiento, software y otras tecnologías que se conectan e intercambian datos con otros dispositivos y sistemas a través de internet u otras redes de comunicación. "),(0,s._)("br"),(0,s._)("br"),(0,s.Uk)(" Este es el portal del area de IOT para la gestion de sensores. Aquí podrá gestionar los sensores. El objetivo de este portal es brindar a la institucion facilidad adminitrativa y mejorar la experiencia de los estudiantes por el paso en la institución. ")])],-1))),Li=Ni((()=>(0,s._)("div",{class:"w-75 overflow-hidden"},[(0,s._)("img",{src:Mi})],-1))),Zi=[Hi,Li];function qi(e,a,o,t,i,l){return(0,s.wg)(),(0,s.iD)("div",Ui,Zi)}var Vi={name:"Inicio",props:{autorizaciones:Object},data(){return{}}};const Yi=(0,R.Z)(Vi,[["render",qi],["__scopeId","data-v-fe458434"]]);var Wi=Yi;const Ki=[{path:"/",name:"inicio",component:Wi},{path:"/sensores",name:"sensores",component:no},{path:"/sugerencias",name:"sugerencias",component:Fi},{path:"/solicitudes",name:"solicitudes",component:bt},{path:"/:paginaNoEncontrada(.*)*",component:j}],Gi=(0,se.p7)({history:(0,se.PO)("/home/"),routes:Ki});Gi.beforeResolve((async(e,a)=>{let o={username:e.query.usuario,email:e.query.email,rol:e.query.categoria,ultimoanio:e.query.ultimoanio,estecnico:e.query.estecnico,instituto:e.query.instituto};if(null==window.sessionStorage.getItem("token")){let a=await X.validarUsuario(o);void 0!==a&&(null!=window.sessionStorage.getItem("token")&&""!=window.sessionStorage.getItem("token")||(window.sessionStorage.setItem("token",a),window.sessionStorage.setItem("rol",e.query.categoria.toLocaleLowerCase()),window.sessionStorage.setItem("autorizaciones",JSON.stringify(await X.getAutorizaciones(window.sessionStorage.token)))))}else null==window.sessionStorage.getItem("autorizaciones")&&window.sessionStorage.setItem("autorizaciones",JSON.stringify(await X.getAutorizaciones(window.sessionStorage.token)));e.fullPath="",e.query.usuario="",e.query.email="",e.query.categoria="",e.query.ultimoanio="",e.query.estecnico="",e.query.instituto=""}));var Ji=Gi,Qi=o(2346),$i=(o(8877),o(85)),Xi=o(3636),el=o(9417);Xi.vI.add(el.QlY,el.u7T,el.wp6,el.IwR,el.LEp,el.g82,el.$aW),(0,t.ri)(te).use(Ji,F.ZP,Qi.Z,$i.Z).component("font-awesome-icon",ee.GN).mount("#app")},2480:function(){}},a={};function o(t){var s=a[t];if(void 0!==s)return s.exports;var i=a[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(a,t,s,i){if(!t){var l=1/0;for(d=0;d<e.length;d++){t=e[d][0],s=e[d][1],i=e[d][2];for(var n=!0,r=0;r<t.length;r++)(!1&i||l>=i)&&Object.keys(o.O).every((function(e){return o.O[e](t[r])}))?t.splice(r--,1):(n=!1,i<l&&(l=i));if(n){e.splice(d--,1);var c=s();void 0!==c&&(a=c)}}return a}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,s,i]}}(),function(){o.d=function(e,a){for(var t in a)o.o(a,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/home/"}(),function(){var e={143:0};o.O.j=function(a){return 0===e[a]};var a=function(a,t){var s,i,l=t[0],n=t[1],r=t[2],c=0;if(l.some((function(a){return 0!==e[a]}))){for(s in n)o.o(n,s)&&(o.m[s]=n[s]);if(r)var d=r(o)}for(a&&a(t);c<l.length;c++)i=l[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},t=self["webpackChunkportal_iot"]=self["webpackChunkportal_iot"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(6426)}));t=o.O(t)})();
//# sourceMappingURL=app.85742dc9.js.map