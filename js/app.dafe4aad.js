(function(){var e={4578:function(e,a,o){"use strict";var s=o(9963),i=o(6252);const t={key:0,id:"loaderContainer",class:"w-100"},l=(0,i._)("div",{id:"loader",class:"spinner-border text-success",role:"status"},[(0,i._)("span",{class:"fs-1"}," IoT")],-1),n=[l],r={key:1,class:"container-fluid"},c={class:"row flex-nowrap"},d={id:"sidebarMenu",class:"col-auto col-md-2 col-xl-2 px-sm-2 px-0"},u={class:"d-flex flex-column align-items-center align-items-sm-start px-2 pt-2 text-white min-vh-100"},b=(0,i._)("span",{class:"fs-3 d-none d-sm-inline"},"IoT",-1),p=(0,i._)("br",null,null,-1),m={class:"nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start w-100",id:"menu"},h={class:"nav-item w-100"},g=(0,i._)("span",{class:"ms-1 d-none d-sm-inline"},"Inicio",-1),S={class:"nav-item w-100"},_=(0,i._)("span",{class:"ms-1 d-none d-sm-inline"},"Sensores",-1),v={class:"nav-item w-100"},A=(0,i._)("span",{class:"ms-1 d-none d-sm-inline"},"Sugerencias",-1),f={class:"nav-item w-100"},w=(0,i._)("span",{class:"ms-1 d-none d-sm-inline"},"Solicitudes",-1),y={class:"col px-0",id:"contenedorVistas"},C=(0,i._)("nav",{class:"navbar shadow-sm px-4",id:"headerVistas"},[(0,i._)("a",{class:"navbar-brand",href:"#"},"Vista")],-1),D={class:"px-4 pt-4 h-100 w-100"},z={key:2,id:"accessDenied",class:"center-0"};function P(e,a,o,s,l,P){const k=(0,i.up)("router-link"),x=(0,i.up)("font-awesome-icon"),T=(0,i.up)("router-view"),I=(0,i.up)("PaginaNoEncontrada");return l.comienzaApp?void 0!==this.autorizaciones&&""!==this.autorizaciones&&"ERR_BAD_REQUEST"!==this.autorizaciones.code&&this.comienzaApp&&!this.mostrarAccesoDenegado?((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",c,[(0,i._)("div",d,[(0,i._)("div",u,[(0,i.Wm)(k,{to:"/",class:"d-flex align-items-center pt-3 pb-26 mb-md-0 me-md-auto text-white text-decoration-none"},{default:(0,i.w5)((()=>[b])),_:1}),p,(0,i._)("ul",m,[(0,i._)("li",h,[(0,i.Wm)(k,{to:"/",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{icon:"fa-solid fa-house"}),(0,i.Uk)(),g])),_:1})]),(0,i._)("li",S,[(0,i.Wm)(k,{to:"/sensores",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{icon:"fa-solid fa-tower-broadcast"}),(0,i.Uk)(),_])),_:1})]),(0,i._)("li",v,[(0,i.Wm)(k,{to:"/sugerencias",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{icon:"fa-solid fa-table-list"}),(0,i.Uk)(),A])),_:1})]),(0,i._)("li",f,[(0,i.Wm)(k,{to:"/solicitudes",id:"menuItem",class:"nav-link align-middle px-0"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{icon:"fa-solid fa-pen"}),(0,i.Uk)(),w])),_:1})])])])]),(0,i._)("div",y,[C,(0,i._)("div",D,[(0,i.Wm)(T,{autorizaciones:l.autorizaciones},null,8,["autorizaciones"])])])])])):this.mostrarAccesoDenegado?((0,i.wg)(),(0,i.iD)("div",z,[(0,i.Wm)(I)])):(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",t,n))}const k={id:"pageContainer"},x=(0,i.uE)('<div class="hover"><div class="background"><div class="door">IoT</div><div class="rug"></div></div><div class="foreground"><div class="bouncer"><div class="head"><div class="neck"></div><div class="eye left"></div><div class="eye right"></div><div class="ear"></div></div><div class="body"></div><div class="arm"></div></div><div class="poles"><div class="pole left"></div><div class="pole right"></div><div class="rope"></div></div></div></div>',1),T=[x];function I(e,a){return(0,i.wg)(),(0,i.iD)("div",k,T)}var E=o(3744);const M={},B=(0,E.Z)(M,[["render",I]]);var R=B,j=(o(7658),o(196));const O="https://pp1-iot.herokuapp.com/",F="Bearer ",H="api/areas",U="api/areas/ids/",V="api/areas/pisos",N="api/tickets/",Y="api/tickets",Z="api/tickets/aprobar/",W="api/tickets/desaprobar/",L="api/usuarios/user/token",q="api/usuarios/user/auth",G="api/areas/nombres/",J="api/sensores/tipos/",K="piso ";var Q={async getAreas(){let e=await j.ZP.get(O+H).then((async e=>{let a=await this.getCantidadPisos(),o=[];for(let s=0;s<a.length;s++){let a=e.data[K+s];for(let e=0;e<a.length;e++)o.push(a[e])}return o})).catch((e=>{console.log(e)}));return e},async getAreaById(e){let a=j.ZP.get(O+U+e).then((async e=>e.data)).catch((e=>{console.log(e)}));return a},async getCantidadPisos(){let e=await j.ZP.get(O+V).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async crearTicketSensor(e){let a={headers:{Authorization:F+window.sessionStorage.token}},o={tipo:e.tipo,tipoSensor:e.tipoSensor,nombreArea:e.area,descripcion:e.descripcion,idSensor:e.idSensor,urls:e.urls},s=await j.ZP.post(O+N,o,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return s},async validarUsuario(e){let a="si"===e.ultimoanio,o="si"===e.estecnico;"directivo"===e.rol&&(e.rol=o?"TECNICO":"DIRECTIVO"),"alumno"===e.rol&&(e.rol=a?"ALUMNO_ULTIMO_ANIO ":"ALUMNO"),"admin"===e.rol&&(e.rol="ADMIN");let s={headers:{email:e.email,usuario:e.username,rol:e.rol}},i=await j.ZP.get(O+L,s).then((async e=>e.data)).catch((e=>{console.log(e)}));return i},async getAutorizaciones(e){let a={headers:{Authorization:F+e}},o=await j.ZP.get(O+q,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o},async getAreasByPiso(e){let a=await j.ZP.get(O+G+e).then((async a=>a.data[K+e])).catch((e=>{console.log(e)}));return a},async getTiposDeSensores(){let e=await j.ZP.get(O+J).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async formatearTiposDeSensores(e){let a=[];for(let o=0;o<e.length;o++){let s=e[o];if("NO_IDENTIFICADO"!=s){let e=s;s=s.replaceAll("_"," "),s=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),a.push({id:e,descripcion:s})}}return a},async getTickets(){let e=await j.ZP.get(O+Y).then((async e=>e.data)).catch((e=>{console.log(e)}));return e},async getSugerencias(){let e=await this.getTickets();const a=e.filter((e=>"SUGERENCIA"===e.tipo));return a},async getSugerenciasByEstado(e){let a=await this.getSugerencias();const o=a.filter((a=>a.estado==e));return o},async getSolicitudes(){let e=await this.getTickets();const a=e.filter((e=>"SUGERENCIA"!=e.tipo));return a},async getSolicitudesByEstado(e){let a=await this.getSolicitudes();const o=a.filter((a=>a.estado==e));return o},async aprobarTicket(e){let a={headers:{Authorization:F+window.sessionStorage.getItem("token")}},o=await j.ZP.put(O+Z+e,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o},async rechazarTicket(e){let a={headers:{Authorization:F+window.sessionStorage.getItem("token")}},o=await j.ZP.put(O+W+e,a).then((async e=>e.data)).catch((e=>{console.log(e)}));return o}},X=o(7810),$={name:"App",components:{PaginaNoEncontrada:R},data(){return{autorizaciones:"",comienzaApp:!1,mostrarAccesoDenegado:!1,pantallaDeCarga:5e3}},methods:{},beforeMount(){setTimeout((()=>{null!=window.sessionStorage.getItem("autorizaciones")&&""!=window.sessionStorage.getItem("autorizaciones")&&"undefined"!==window.sessionStorage.getItem("autorizaciones")&&void 0!==window.sessionStorage.getItem("autorizaciones")?(this.autorizaciones=JSON.parse(window.sessionStorage.getItem("autorizaciones")),this.comienzaApp=!0,this.mostrarAccesoDenegado=!1):(this.mostrarAccesoDenegado=!0,this.comienzaApp=!0)}),this.pantallaDeCarga)}};const ee=(0,E.Z)($,[["render",P]]);var ae=ee,oe=o(2201),se=o(3577);const ie={id:"sensoresContainer",class:"shadow col-11 col-md-11"},te={id:"barraBusquedaContainer"},le={id:"barraBusquedaDiv"},ne={id:"selectorGroupPiso"},re={id:"selectPisoPlaceholder",selected:"",hidden:""},ce=["value","selected"],de={id:"selectorGroupLugar"},ue={id:"selectLugarPlaceholder",selected:"",hidden:""},be=["value"],pe={id:"btnBusquedaContainer"},me=["disabled"],he={id:"btnBusquedaContainer"},ge=["disabled"],Se={id:"btnAltaContainer"};function _e(e,a,o,t,l,n){const r=(0,i.up)("FormAltaSensor"),c=(0,i.up)("registroTable");return(0,i.wg)(),(0,i.iD)("div",ie,[(0,i._)("div",te,[(0,i._)("div",le,[(0,i._)("div",ne,[(0,i.wy)((0,i._)("select",{onChange:a[0]||(a[0]=e=>n.filtrarLugaresPorPiso(l.pisoSeleccionado)),"onUpdate:modelValue":a[1]||(a[1]=e=>l.pisoSeleccionado=e),id:"comboBoxPiso",class:"btn btn-success form select",placeholder:"Seleccionar Piso"},[(0,i._)("option",re,(0,se.zw)(l.pisoSeleccionado),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.pisos,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.piso,value:e,selected:"0"==e},(0,se.zw)(0==e?"Planta baja":e),9,ce)))),128))],544),[[s.bM,l.pisoSeleccionado]])]),(0,i._)("div",de,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.areaSeleccionada=e),id:"comboBoxLugar",class:"btn btn-success"},[(0,i._)("option",ue,(0,se.zw)(l.areaSeleccionada),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.areasCombox,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,se.zw)(e.nombre),9,be)))),128))],512),[[s.bM,l.areaSeleccionada]])]),(0,i._)("div",pe,[(0,i._)("button",{id:"btnBuscar",disabled:"Área..."===this.areaSeleccionada||null===this.areaSeleccionada,class:"btn btn-success",onClick:a[3]||(a[3]=e=>n.buscarSensores())}," Buscar ",8,me)]),(0,i._)("div",he,[(0,i._)("button",{id:"btnBuscar",disabled:"Área..."===this.areaSeleccionada||null===this.areaSeleccionada,class:"btn btn-success",onClick:a[4]||(a[4]=e=>n.redireccionarSensoresEnTiempoReal())}," Ver en tiempo real ",8,ge)])]),(0,i._)("div",Se,[(0,i.wy)((0,i._)("button",{id:"btnAgregar",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalAltaSensor",onClick:a[5]||(a[5]=e=>n.obtenerTiposDeSensores())}," Solicitar alta sensor ",512),[[s.F8,this.autorizaciones["Alta sensor"]]])]),(0,i.Wm)(r,{tiposSensores:l.tiposSensores,pisos:l.pisos},null,8,["tiposSensores","pisos"])]),(0,i.Wm)(c,{tituloTabla:l.tituloTabla,sensoresInArea:l.sensoresInArea,autorizaciones:o.autorizaciones,areaSeleccionada:l.areaSeleccionada},null,8,["tituloTabla","sensoresInArea","autorizaciones","areaSeleccionada"])])}const ve=e=>((0,i.dD)("data-v-4990a780"),e=e(),(0,i.Cn)(),e),Ae={id:"instanciasTableDiv"},fe={class:"table table-striped"},we={id:"headTable",scope:"col",colspan:"5"},ye=ve((()=>(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},[(0,i._)("b",null,"Sensor")]),(0,i._)("th",{scope:"col"},[(0,i._)("b",null,"Unidad de medida")]),(0,i._)("th",{scope:"col"},[(0,i._)("b",null,"Último valor registrado")]),(0,i._)("th",{scope:"col"},[(0,i._)("b",null,"Fecha")]),(0,i._)("th",{scope:"col",colspan:"2"})],-1))),Ce={id:"imgModificar"},De=["onClick"],ze=["src"],Pe={id:"imgTacho"},ke=["onClick"],xe=["src"];function Te(e,a,t,l,n,r){const c=(0,i.up)("ConfirmarBajaSensor"),d=(0,i.up)("ConfirmarModificacionSensor");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Ae,[(0,i._)("table",fe,[(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",we,[(0,i._)("b",null,(0,se.zw)(t.tituloTabla),1)])]),ye]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.sensoresInArea,(e=>((0,i.wg)(),(0,i.iD)("tr",{id:"registroRow",key:e.id},[(0,i._)("td",null,(0,se.zw)(e.tipo),1),(0,i._)("td",null,(0,se.zw)(e.unidadDeMedida),1),(0,i._)("td",null,(0,se.zw)(this.getUltimoRegistroValor(e)),1),(0,i._)("td",null,(0,se.zw)(this.getUltimoRegistroFecha(e)),1),(0,i._)("td",Ce,[(0,i._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#modalModificaSensor",onClick:a=>r.modificarSensor(e)},[(0,i._)("img",{src:o(2965),alt:"algo"},null,8,ze)],8,De)]),(0,i.wy)((0,i._)("td",Pe,[void 0!==t.autorizaciones?((0,i.wg)(),(0,i.iD)("button",{key:0,"data-bs-toggle":"modal","data-bs-target":"#modalBajaSensor",onClick:a=>r.eliminarSensor(e)},[(0,i._)("img",{src:o(6654),alt:""},null,8,xe)],8,ke)):(0,i.kq)("",!0)],512),[[s.F8,this.autorizaciones["Baja sensor"]]])])))),128))])])]),(0,i.Wm)(c,{bajaSensor:this.bajaSensor},null,8,["bajaSensor"]),(0,i.Wm)(d,{modificaSensor:this.modificaSensor},null,8,["modificaSensor"])],64)}const Ie={class:"modal fade",id:"modalBajaSensor",tabindex:"-1","aria-labelledby":"modalBajaSensor","aria-hidden":"false"},Ee={class:"modal-dialog"},Me={class:"modal-content"},Be=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitud de baja de sensor "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Re={class:"modal-body"},je={class:"modal-footer"},Oe=(0,i._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),Fe={class:"modal fade",id:"modalConfirmaBajaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaBajaSensor","aria-hidden":"false"},He={class:"modal-dialog"},Ue={class:"modal-content"},Ve=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando baja de sensor "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ne={class:"modal-body"},Ye={key:0,class:"spinner-border text-success",role:"status"},Ze=(0,i._)("span",{class:"sr-only"},"iot",-1),We=[Ze],Le={key:1,class:"",role:"status"};function qe(e,a,o,s,t,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Ie,[(0,i._)("div",Ee,[(0,i._)("div",Me,[Be,(0,i._)("div",Re," ¿Estás seguro que desea solicitar la baja del sensor de "+(0,se.zw)(null!==this.bajaSensor?this.bajaSensor.tipoSensor:"")+"? ",1),(0,i._)("div",je,[Oe,(0,i._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[0]||(a[0]=e=>l.enviarSolicitudBajaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaBajaSensor"}," Confirmar ")])])])]),(0,i._)("div",Fe,[(0,i._)("div",He,[(0,i._)("div",Ue,[Ve,(0,i._)("div",Ne,[this.muestraSpinner?((0,i.wg)(),(0,i.iD)("div",Ye,We)):((0,i.wg)(),(0,i.iD)("div",Le,(0,se.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Ge={props:{bajaSensor:Object},data(){return{muestraConfimacionEnvioSolicitud:!1,textoConfirmacionBaja:"",muestraSpinner:!1}},methods:{async enviarSolicitudBajaSensor(){let e=await Q.crearTicketSensor(this.bajaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==e&&""!==e?"Solicitud de baja de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const Je=(0,E.Z)(Ge,[["render",qe]]);var Ke=Je;const Qe={class:"modal fade",id:"modalModificaSensor",tabindex:"-1","aria-labelledby":"modalModificaSensor","aria-hidden":"false"},Xe={class:"modal-dialog"},$e={class:"modal-content p-2"},ea={class:"modal-header"},aa={class:"modal-title",id:"exampleModalLabel"},oa=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),sa={class:"mb-5 col-12"},ia={class:"modal-footer"},ta=(0,i._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"}," Cancelar ",-1),la={class:"modal fade",id:"modalConfirmaModificacionSensor",tabindex:"-1","aria-labelledby":"modalConfirmaModificacionSensor","aria-hidden":"false"},na={class:"modal-dialog"},ra={class:"modal-content"},ca=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando modificacion "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),da={class:"modal-body"},ua={key:0,class:"spinner-border text-success",role:"status"},ba=(0,i._)("span",{class:"sr-only"},"iot",-1),pa=[ba],ma={key:1,class:"",role:"status"};function ha(e,a,o,t,l,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Qe,[(0,i._)("div",Xe,[(0,i._)("div",$e,[(0,i._)("div",ea,[(0,i._)("h5",aa," Modificar sensor de "+(0,se.zw)(null!==this.modificaSensor?this.modificaSensor.tipoSensor:""),1),oa]),(0,i._)("div",sa,[(0,i.wy)((0,i._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",placeholder:"Describa su modificacion","onUpdate:modelValue":a[0]||(a[0]=e=>l.descripcion=e),required:""},null,512),[[s.nr,l.descripcion]])]),(0,i._)("div",ia,[ta,(0,i._)("button",{type:"button",class:"btn btn-success","data-bs-dismiss":"modal",onClick:a[1]||(a[1]=e=>n.enviarSolicitudModificacionSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaModificacionSensor"}," Enviar sugerencia ")])])])]),(0,i._)("div",la,[(0,i._)("div",na,[(0,i._)("div",ra,[ca,(0,i._)("div",da,[this.muestraSpinner?((0,i.wg)(),(0,i.iD)("div",ua,pa)):((0,i.wg)(),(0,i.iD)("div",ma,(0,se.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var ga={props:{modificaSensor:Object,sensoreSeleccionado:Object},data(){return{muestraSpinner:!0,textoConfirmacionBaja:"modificacionSolicitada",descripcion:""}},methods:{async enviarSolicitudModificacionSensor(){let e=this.modificaSensor;e.descripcion=this.descripcion;let a=await Q.crearTicketSensor(this.modificaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==a&&""!==a?"Solicitud de modificacion de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const Sa=(0,E.Z)(ga,[["render",ha]]);var _a=Sa,va={name:"RegistroTable",components:{ConfirmarBajaSensor:Ke,ConfirmarModificacionSensor:_a},props:{tituloTabla:String,sensoresInArea:Object,autorizaciones:Object,areaSeleccionada:Object},data(){return{bajaSensor:null,modificaSensor:null}},methods:{getUltimoRegistroValor(e){if(void 0!=e.registros&&null!=e.registros){let a=e.registros[e.registros.length-1];return void 0===a?"-":this.getSignoUnidadDeMedida(e,a.valor)}return"-"},getUltimoRegistroFecha(e){if(void 0!=e.registros&&null!=e.registros){let a=e.registros[e.registros.length-1];return void 0===a?"-":a.fecha}return"-"},getSignoUnidadDeMedida(e,a){switch(e.unidadDeMedida){case"Porcentaje":return a+"%";case"Celcius":return a+"°C";case"Decibeles":return a+"dB";case"ppm":return a+"ppm";case"Boolean":return"PUERTA"===e.tipo||"VENTANA"===e.tipo?1==a?" Abierta":" Cerrada":1==a?" Activado":" Desactivado";case void 0:return"-"}},eliminarSensor(e){let a="BAJA_SENSOR",o=e.tipo,s=this.areaSeleccionada.nombre,i=e.id;this.bajaSensor={tipo:a,tipoSensor:o,area:s,descripcion:"",idSensor:i,urls:[]}},clearSensorBaja(){this.bajaSensor=null},modificarSensor(e){let a="MODIFICAR_SENSOR",o=e.tipo,s=this.areaSeleccionada.nombre,i=e.id;this.modificaSensor={tipo:a,tipoSensor:o,area:s,descripcion:"",idSensor:i,urls:[]}},clearSensorModificacion(){this.modificaSensor=null}}};const Aa=(0,E.Z)(va,[["render",Te],["__scopeId","data-v-4990a780"]]);var fa=Aa;const wa=e=>((0,i.dD)("data-v-106580a6"),e=e(),(0,i.Cn)(),e),ya={class:"modal fade",id:"modalAltaSensor",tabindex:"-1","aria-labelledby":"modalAltaSensor","aria-hidden":"true"},Ca={class:"modal-dialog"},Da={class:"modal-content"},za=wa((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Solicitud de alta de sensor")],-1))),Pa={class:"modal-body p-0 pt-2"},ka={class:"mb-3 col-8"},xa=wa((()=>(0,i._)("label",{for:"validationDefault04",class:"form-label"},"Tipo de sensor",-1))),Ta={id:"selectPisoPlaceholder",selected:"",hidden:""},Ia=["value"],Ea={class:"mb-3 col-8"},Ma=wa((()=>(0,i._)("label",{for:"validationDefault05",class:"form-label"},"Piso",-1))),Ba={id:"selectPisoPlaceholder",selected:"",hidden:""},Ra=["value"],ja={class:"mb-3 col-8"},Oa=wa((()=>(0,i._)("label",{for:"validationDefault05",class:"form-label"},"Área",-1))),Fa={id:"selectAreaPlaceholder",selected:"",hidden:""},Ha=["value"],Ua={id:"buttonsForms",class:"col-12 modal-footer"},Va={class:"modal fade",id:"modalConfirmaAltaSensor",tabindex:"-1","aria-labelledby":"modalConfirmaAltaSensor","aria-hidden":"false"},Na={class:"modal-dialog"},Ya={class:"modal-content"},Za=wa((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando alta de sensor "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Wa={class:"modal-body"},La={key:0,class:"spinner-border text-success",role:"status"},qa=wa((()=>(0,i._)("span",{class:"sr-only"},"iot",-1))),Ga=[qa],Ja={key:1,class:"",role:"status"};function Ka(e,a,o,t,l,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",ya,[(0,i._)("div",Ca,[(0,i._)("div",Da,[za,(0,i._)("div",Pa,[(0,i._)("form",{class:"column",onSubmit:a[6]||(a[6]=(0,s.iM)((e=>n.limpiarForm()),["prevent"]))},[(0,i._)("div",ka,[xa,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.tipoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,i._)("option",Ta,(0,se.zw)(l.tipoSeleccionado),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.tiposSensores,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e.descripcion},(0,se.zw)(e.descripcion),9,Ia)))),128))],512),[[s.bM,l.tipoSeleccionado]])]),(0,i._)("div",Ea,[Ma,(0,i.wy)((0,i._)("select",{onChange:a[1]||(a[1]=e=>n.obtenerAreasPorPiso()),"onUpdate:modelValue":a[2]||(a[2]=e=>l.pisoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,i._)("option",Ba,(0,se.zw)(l.pisoSeleccionado),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.pisos,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,se.zw)(0===e?"Planta baja":e),9,Ra)))),128))],544),[[s.bM,l.pisoSeleccionado]])]),(0,i._)("div",ja,[Oa,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>l.areaSeleccionada=e),class:"form-select",id:"validationDefault04",required:""},[(0,i._)("option",Fa,(0,se.zw)(l.areaSeleccionada),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.areasCombobox,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,se.zw)(e[1]),9,Ha)))),128))],512),[[s.bM,l.areaSeleccionada]])]),(0,i._)("div",Ua,[(0,i._)("button",{id:"btnEnviarSolicitud",class:"btn btn-success btn-sm",type:"submit","data-bs-dismiss":"modal",onClick:a[4]||(a[4]=e=>n.enviarSolicitudAltaSensor()),"data-bs-toggle":"modal","data-bs-target":"#modalConfirmaAltaSensor"},"Enviar solicitud"),(0,i._)("button",{id:"btnCancelarSolicitud",class:"btn btn-outline-danger btn-sm","data-bs-dismiss":"modal",onClick:a[5]||(a[5]=e=>n.limpiarForm())},"Cancelar")])],32)])])])]),(0,i._)("div",Va,[(0,i._)("div",Na,[(0,i._)("div",Ya,[Za,(0,i._)("div",Wa,[this.muestraSpinner?((0,i.wg)(),(0,i.iD)("div",La,Ga)):((0,i.wg)(),(0,i.iD)("div",Ja,(0,se.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var Qa={name:"FormAltaSensor",props:{tiposSensores:Object,pisos:Object},data(){return{areasCombobox:[],unidadSeleccionada:"",tipoSeleccionado:"Seleccionar tipo...",pisoSeleccionado:"Seleccionar piso...",areaSeleccionada:"Seleccionar área...",muestraSpinner:!0}},async beforeMount(){},methods:{cerrarForm(){},limpiarForm(){this.pisoSeleccionado="Seleccionar piso...",this.areaSeleccionada="Seleccionar área...",this.tipoSeleccionado="Seleccionar tipo...",this.unidadSeleccionada=""},async obtenerAreasPorPiso(){this.areasCombobox=await Q.getAreasByPiso(this.pisoSeleccionado)},async enviarSolicitudAltaSensor(){let e="ALTA_SENSOR",a=this.tipoSeleccionado.toUpperCase().replaceAll(" ","_"),o=this.areaSeleccionada;this.altaSensor={tipo:e,tipoSensor:a,area:o[1],descripcion:"",idSensor:"",urls:[]};let s=await Q.crearTicketSensor(this.altaSensor);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==s&&""!==s?"Solicitud de alta de sensor enviado con exito!":"Falló el envio de la solicitud"}}};const Xa=(0,E.Z)(Qa,[["render",Ka],["__scopeId","data-v-106580a6"]]);var $a=Xa,eo={name:"Sensores",components:{RegistroTable:fa,FormAltaSensor:$a},props:{autorizaciones:Object},data(){return{pisos:[],areas:[],areasCombox:[],tiposSensores:[],pisoSeleccionado:"Piso...",areaSeleccionada:"Área...",sensoresInArea:null,tituloTabla:"Tabla de sensores "}},async beforeMount(){await this.cargarDatos()},methods:{filtrarLugaresPorPiso(e){this.areasCombox=[];for(let a=0;a<this.areas.length;a++){let o=this.areas[a];o.piso==e&&(this.areasCombox.includes(o.nombre)||this.areasCombox.push(o))}this.areasCombox.sort(),this.areaSeleccionada="Área..."},async cargarDatos(){this.areas=await Q.getAreas(),this.pisos=await Q.getCantidadPisos()},async buscarSensores(){this.setTituloTabla();let e=await Q.getAreaById(this.areaSeleccionada.id);this.sensoresInArea=e.sensores},setTituloTabla(){"Área..."!=this.areaSeleccionada&&"Piso..."!=this.pisoSeleccionado&&(this.tituloTabla="Tabla de sensores  "+this.areaSeleccionada.nombre+" - Piso: "+(0==this.pisoSeleccionado?"Planta baja":this.pisoSeleccionado))},redireccionarSensoresEnTiempoReal(){window.open("https://www.iot-pp1.click/ui/#!/0?area="+this.areaSeleccionada.nombre.replaceAll(" ","_"),"_blank")},async obtenerTiposDeSensores(){this.tiposSensores=await Q.formatearTiposDeSensores(await Q.getTiposDeSensores())}}};const ao=(0,E.Z)(eo,[["render",_e],["__scopeId","data-v-ef763344"]]);var oo=ao;const so=e=>((0,i.dD)("data-v-7595c3ab"),e=e(),(0,i.Cn)(),e),io=so((()=>(0,i._)("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link active",id:"cardSolicitudesPendientes-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesPendientes",type:"button",role:"tab","aria-controls":"cardSolicitudesPendientes","aria-selected":"true"},"Pendientes")]),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"cardSolicitudesCerradas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesCerradas",type:"button",role:"tab","aria-controls":"cardSolicitudesCerradas","aria-selected":"false"},"Cerradas")]),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"cardSolicitudesAprobadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesAprobadas",type:"button",role:"tab","aria-controls":"cardSolicitudesAprobadas","aria-selected":"false"},"Aprobadas")]),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"cardSolicitudesRechazadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSolicitudesRechazadas",type:"button",role:"tab","aria-controls":"cardSolicitudesRechazadas","aria-selected":"false"},"Rechazadas")])],-1))),to={class:"tab-content",id:"myTabContent"},lo={id:"cardSolicitudesPendientes",class:"card tab-pane show active",role:"tabpanel","aria-labelledby":"cardSolicitudesPendientes-tab"},no=so((()=>(0,i._)("div",{id:"cardSolicitudesPendientesHeader",class:"card-header py-3"},[(0,i._)("b",null,"Solicitudes pendientes")],-1))),ro={class:"card-body"},co={class:"table table-striped table-hover"},uo=so((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de solicitud"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{colspan:"2",scope:"col"})])],-1))),bo={class:"p-auto",scope:"row"},po=so((()=>(0,i._)("td",{align:"center"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success"},"Ver detalle")],-1))),mo={id:"solicitudButtons",align:"right"},ho=["onClick"],go=["onClick"],So={id:"cardSolicitudesCerradas",class:"card tab-pane",role:"tabpanel","aria-labelledby":"cardSolicitudesCerradas-tab"},_o=so((()=>(0,i._)("div",{class:"card-header py-3"},[(0,i._)("b",null,"Solicitudes cerradas")],-1))),vo={class:"card-body"},Ao={class:"table table-striped table-hover"},fo=so((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de solicitud"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{scope:"col"})])],-1))),wo={scope:"row"},yo=so((()=>(0,i._)("td",{align:"center"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success"},"Ver detalle")],-1))),Co={id:"cardSolicitudesRechazadas",class:"card tab-pane",role:"tabpanel","aria-labelledby":"cardSolicitudesRechazadas-tab"},Do=so((()=>(0,i._)("div",{class:"card-header py-3"},[(0,i._)("b",null,"Solicitudes rechazadas")],-1))),zo={class:"card-body"},Po={class:"table table-striped table-hover"},ko=so((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de solicitud"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{scope:"col"})])],-1))),xo={scope:"row"},To=so((()=>(0,i._)("td",{align:"center"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success"},"Ver detalle")],-1))),Io={id:"cardSolicitudesAprobadas",class:"card tab-pane",role:"tabpanel","aria-labelledby":"cardSolicitudesAprobadas-tab"},Eo=so((()=>(0,i._)("div",{class:"card-header py-3"},[(0,i._)("b",null,"Solicitudes aprobadas")],-1))),Mo={class:"card-body"},Bo={class:"table table-striped table-hover"},Ro=so((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de solicitud"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{scope:"col"})])],-1))),jo={scope:"row"},Oo=so((()=>(0,i._)("td",{align:"center"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success"},"Ver detalle")],-1)));function Fo(e,a,o,t,l,n){const r=(0,i.up)("font-awesome-icon");return(0,i.wg)(),(0,i.iD)(i.HY,null,[io,(0,i._)("div",to,[(0,i._)("div",lo,[no,(0,i._)("div",ro,[(0,i._)("table",co,[uo,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.solicitudesPendientes,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",bo,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),po,(0,i.wy)((0,i._)("td",mo,[(0,i._)("button",{onClick:a=>n.aprobarSolicitud(e.id)},[(0,i.Wm)(r,{id:"btnAprobar",icon:"fa-solid fa-check"})],8,ho),(0,i._)("button",{onClick:a=>n.rechazarSolicitud(e.id)},[(0,i.Wm)(r,{id:"btnRechazar",icon:"fa-solid fa-skull-crossbones"})],8,go)],512),[[s.F8,l.esTecnico]])])))),128))])])])]),(0,i._)("div",So,[_o,(0,i._)("div",vo,[(0,i._)("table",Ao,[fo,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.solicitudesCerradas,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",wo,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),yo])))),128))])])])]),(0,i._)("div",Co,[Do,(0,i._)("div",zo,[(0,i._)("table",Po,[ko,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.solicitudesRechazadas,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",xo,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),To])))),128))])])])]),(0,i._)("div",Io,[Eo,(0,i._)("div",Mo,[(0,i._)("table",Bo,[Ro,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.solicitudesAprobadas,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",jo,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)("BAJA_SENSOR"===e.tipo?"Baja de sensor":"ALTA_SENSOR"===e.tipo?"Alta de sensor":"Modificación de sensor"),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),Oo])))),128))])])])])])],64)}var Ho={name:"Solicitudes",data(){return{solicitudesPendientes:[],solicitudesCerradas:[],solicitudesAprobadas:[],solicitudesRechazadas:[],esTecnico:!1}},async beforeMount(){await this.cargarDatos(),"directivo"==window.sessionStorage.getItem("rol")&&(this.esTecnico=!0)},methods:{async cargarDatos(){this.solicitudesPendientes=await Q.getSolicitudesByEstado("ABIERTA"),this.solicitudesCerradas=await Q.getSolicitudesByEstado("CERRADA"),this.solicitudesAprobadas=await Q.getSolicitudesByEstado("APROBADA"),this.solicitudesRechazadas=await Q.getSolicitudesByEstado("DESAPROBADA")},async aprobarSolicitud(e){Q.aprobarTicket(e),await this.cargarDatos},async rechazarSolicitud(e){Q.rechazarTicket(e),await this.cargarDatos}}};const Uo=(0,E.Z)(Ho,[["render",Fo],["__scopeId","data-v-7595c3ab"]]);var Vo=Uo;const No=e=>((0,i.dD)("data-v-d1ef1b84"),e=e(),(0,i.Cn)(),e),Yo={id:"btnEnviarSugerencia",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalAltaSugerencia"},Zo=No((()=>(0,i._)("ul",{class:"nav nav-tabs mt-2",id:"myTab",role:"tablist"},[(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link active",id:"cardSugerenciasPendientes-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasPendientes",type:"button",role:"tab","aria-controls":"cardSugerenciasPendientes","aria-selected":"true"},"Pendientes")]),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"cardSugerenciasCerradas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasCerradas",type:"button",role:"tab","aria-controls":"cardSugerenciasCerradas","aria-selected":"false"},"Cerradas")]),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"cardSugerenciasAprobadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasAprobadas",type:"button",role:"tab","aria-controls":"cardSugerenciasAprobadas","aria-selected":"false"},"Aprobadas")]),(0,i._)("li",{class:"nav-item",role:"presentation"},[(0,i._)("button",{class:"nav-link",id:"cardSugerenciasRechazadas-tab","data-bs-toggle":"tab","data-bs-target":"#cardSugerenciasRechazadas",type:"button",role:"tab","aria-controls":"cardSugerenciasRechazadas","aria-selected":"false"},"Rechazadas")])],-1))),Wo={class:"tab-content overflow-auto",id:"myTabContent",style:{"max-height":"calc(90vh - 80px)"}},Lo={id:"cardSugerenciasPendientes",class:"card tab-pane fade show active",role:"tabpanel","aria-labelledby":"cardSugerenciasPendientes-tab"},qo=No((()=>(0,i._)("div",{id:"cardSugerenciasPendientesHeader",class:"card-header py-3"},[(0,i._)("b",null,"Sugerencias pendientes")],-1))),Go={class:"card-body"},Jo={class:"table table-striped table-hover"},Ko=No((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{colspan:"2",scope:"col"})])],-1))),Qo={scope:"row"},Xo={align:"center"},$o=["onClick"],es={id:"sugerenciaButtons",align:"right"},as=["onClick"],os=["onClick"],ss={id:"cardSugerenciasCerradas",class:"card tab-pane fade",role:"tabpanel","aria-labelledby":"cardSugerenciasCerradas-tab"},is=No((()=>(0,i._)("div",{class:"card-header py-3"},[(0,i._)("b",null,"Sugerencias cerradas")],-1))),ts={class:"card-body"},ls={class:"table table-striped table-hover"},ns=No((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{scope:"col"})])],-1))),rs={scope:"row"},cs=No((()=>(0,i._)("td",{align:"center"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success"},"Ver detalle")],-1))),ds={id:"cardSugerenciasRechazadas",class:"card tab-pane fade",role:"tabpanel","aria-labelledby":"cardSugerenciasRechazadas-tab"},us=No((()=>(0,i._)("div",{class:"card-header py-3"},[(0,i._)("b",null,"Sugerencias rechazadas")],-1))),bs={class:"card-body"},ps={class:"table table-striped table-hover"},ms=No((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{scope:"col"})])],-1))),hs={scope:"row"},gs=No((()=>(0,i._)("td",{align:"center"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success"},"Ver detalle")],-1))),Ss={id:"cardSugerenciasAprobadas",class:"card tab-pane fade",role:"tabpanel","aria-labelledby":"cardSugerenciasAprobadas-tab"},_s=No((()=>(0,i._)("div",{class:"card-header py-3"},[(0,i._)("b",null,"Sugerencias aprobadas")],-1))),vs={class:"card-body"},As={class:"table table-striped table-hover"},fs=No((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"ID"),(0,i._)("th",{scope:"col"},"Tipo de sensor"),(0,i._)("th",{scope:"col"},"Área"),(0,i._)("th",{scope:"col"},"Fecha"),(0,i._)("th",{scope:"col"})])],-1))),ws={scope:"row"},ys=No((()=>(0,i._)("td",{align:"center"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success"},"Ver detalle")],-1))),Cs={class:"modal fade",id:"modalDetalleSugerencia",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ds={class:"modal-dialog"},zs={class:"modal-content"},Ps=No((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Detalle sugerencia")],-1))),ks={class:"modal-body"},xs=["src"],Ts=No((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-outline-success","data-bs-dismiss":"modal"},"Close")],-1)));function Is(e,a,o,t,l,n){const r=(0,i.up)("font-awesome-icon"),c=(0,i.up)("FormAltaSugerencia");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)((0,i._)("button",Yo," Realizar sugerencia ",512),[[s.F8,this.autorizaciones["Alta sugerencia"]]]),Zo,(0,i._)("div",Wo,[(0,i._)("div",Lo,[qo,(0,i._)("div",Go,[(0,i._)("table",Jo,[Ko,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.sugerenciasPendientes,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",Qo,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),(0,i._)("td",Xo,[(0,i._)("button",{onClick:a=>n.verDetalleSugerencia(e),type:"button",class:"btn btn-outline-success","data-bs-toggle":"modal","data-bs-target":"#modalDetalleSugerencia"}," Ver detalle ",8,$o)]),(0,i.wy)((0,i._)("td",es,[(0,i._)("button",{onClick:a=>n.aprobarSugerencia(e.id)},[(0,i.Wm)(r,{id:"btnAprobar",icon:"fa-solid fa-check"})],8,as),(0,i._)("button",{onClick:a=>n.rechazarSugerencia(e.id)},[(0,i.Wm)(r,{id:"btnRechazar",icon:"fa-solid fa-skull-crossbones"})],8,os)],512),[[s.F8,l.esDirectivo]])])))),128))])])])]),(0,i._)("div",ss,[is,(0,i._)("div",ts,[(0,i._)("table",ls,[ns,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.sugerenciasCerradas,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",rs,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),cs])))),128))])])])]),(0,i._)("div",ds,[us,(0,i._)("div",bs,[(0,i._)("table",ps,[ms,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.sugerenciasRechazadas,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",hs,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),gs])))),128))])])])]),(0,i._)("div",Ss,[_s,(0,i._)("div",vs,[(0,i._)("table",As,[fs,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.sugerenciasAprobadas,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("th",ws,(0,se.zw)(e.id),1),(0,i._)("td",null,(0,se.zw)(e.tipoSensor),1),(0,i._)("td",null,(0,se.zw)(e.nombreArea),1),(0,i._)("td",null,(0,se.zw)(e.fecha),1),ys])))),128))])])])])]),(0,i.Wm)(c),(0,i._)("div",Cs,[(0,i._)("div",Ds,[(0,i._)("div",zs,[Ps,(0,i._)("div",ks,[(0,i.Uk)(" Descripcion: "+(0,se.zw)(l.sugerenciaSeleccionada.descripcion)+" ",1),(0,i._)("iframe",{height:"400",width:"568",src:l.sugerenciaSeleccionada.urls[0]},"\r\n\r\n            ",8,xs)]),Ts])])])],64)}const Es={class:"modal fade",id:"modalAltaSugerencia",tabindex:"-1","aria-labelledby":"modalAltaSugerencia","aria-hidden":"true"},Ms={class:"modal-dialog"},Bs=(0,i._)("div",{class:"modal-header"},null,-1),Rs={class:"modal-content p-3"},js=(0,i._)("div",{class:"d-flex flex-row justify-content-between mb-2"},[(0,i._)("h3",{class:"card-header card-title"},"Complete los datos"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Os=(0,i._)("p",{class:""},"Todos los datos son obligatorios, debe indicar el lugar y el tipo de sensor sobre el que quiere realizar una sugerencia",-1),Fs={id:"detalleSugerencia"},Hs={class:"mb-3 col-12"},Us=(0,i._)("label",{for:"validationDefault05",class:"form-label"}," Piso* ",-1),Vs=["value"],Ns=["value"],Ys={class:"mb-3 col-12"},Zs=(0,i._)("label",{for:"validationDefault05",class:"form-label"}," Lugar* ",-1),Ws=["value"],Ls=["value"],qs={class:"mb-3 col-12"},Gs=(0,i._)("label",{for:"validationDefault04",class:"form-label"}," Tipo de sensor* ",-1),Js=["value"],Ks=["value"],Qs={class:"col-auto",id:"btnAltaSugerencia"},Xs=["disabled"];function $s(e,a,o,t,l,n){const r=(0,i.up)("ConfiguracionIFrame");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Es,[(0,i._)("div",Ms,[Bs,(0,i._)("div",Rs,[js,Os,(0,i._)("form",{class:"mx-30 needs-validation",onSubmit:a[7]||(a[7]=(0,s.iM)((()=>{}),["prevent"]))},[(0,i._)("div",Fs,[(0,i._)("div",Hs,[Us,(0,i.wy)((0,i._)("select",{onChange:a[0]||(a[0]=e=>n.obtenerAreasPorPiso()),"onUpdate:modelValue":a[1]||(a[1]=e=>l.pisoSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,i.wy)((0,i._)("option",{selected:"",value:l.pisoSeleccionado},(0,se.zw)(l.pisoSeleccionado),9,Vs),[[s.F8,l.mostrarPlaceHolderPiso]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.pisos,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e,required:""},(0,se.zw)(0===e?"Planta baja":e),9,Ns)))),128))],544),[[s.bM,l.pisoSeleccionado]])]),(0,i._)("div",Ys,[Zs,(0,i.wy)((0,i._)("select",{onChange:a[2]||(a[2]=e=>n.placeHolderArea()),class:"form-select",id:"validationDefault04","onUpdate:modelValue":a[3]||(a[3]=e=>l.areaSeleccionada=e),required:""},[(0,i.wy)((0,i._)("option",{selected:"",value:l.areaSeleccionada,required:""},(0,se.zw)(l.areaSeleccionada),9,Ws),[[s.F8,l.mostrarPlaceHolderArea]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.areas,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,se.zw)(e),9,Ls)))),128))],544),[[s.bM,l.areaSeleccionada]])]),(0,i._)("div",qs,[Gs,(0,i.wy)((0,i._)("select",{onChange:a[4]||(a[4]=e=>n.placeHolderTipoSensor()),"onUpdate:modelValue":a[5]||(a[5]=e=>l.tipoSensorSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,i.wy)((0,i._)("option",{selected:"",value:l.tipoSensorSeleccionado,required:""},(0,se.zw)(l.tipoSensorSeleccionado),9,Js),[[s.F8,l.mostrarPlaceHolderTipoSensor]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.tiposSensores,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.descripcion,value:e.descripcion},(0,se.zw)(e.descripcion),9,Ks)))),128))],544),[[s.bM,l.tipoSensorSeleccionado]])])]),(0,i._)("div",Qs,[(0,i._)("button",{id:"btnSiguienteFormAltaSugerencia",class:"float-right btn btn-success","data-bs-toggle":"modal","data-bs-target":"#ConfiguracionIFrameForm",onClick:a[6]||(a[6]=e=>n.cargarIdArea()),disabled:l.formValido,style:{float:"right !important"}}," Siguiente ",8,Xs)])],32)])])]),(0,i.Wm)(r,{tipoSensorSeleccionado:l.tipoSensorSeleccionado,areaSeleccionada:l.idArea},null,8,["tipoSensorSeleccionado","areaSeleccionada"])],64)}const ei={class:"modal fade",id:"ConfiguracionIFrameForm",tabindex:"-1","aria-labelledby":"modalIFrameLabelledby","aria-hidden":"true"},ai={class:"modal-dialog"},oi={class:"modal-content p-3"},si=(0,i._)("div",{class:"d-flex flex-row justify-content-between mb-2"},[(0,i._)("h3",{class:"card-header card-title"},"Indique el periodo"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ii=(0,i._)("p",null,"Todos los campos son obligatorios, debe elegir un periodo para realizar una sugerencia",-1),ti={class:"col-12"},li={class:"mb-3 col-12"},ni=(0,i._)("label",{for:"validationDefault05",class:"form-label"},"Año",-1),ri=["value"],ci=["value"],di={class:"mb-3 col-12"},ui=(0,i._)("label",{for:"validationDefault05",class:"form-label"},"Mes",-1),bi=["value"],pi=["value"],mi={class:"col-auto"},hi=["disabled"];function gi(e,a,o,t,l,n){const r=(0,i.up)("EnvioFormAltaSugerencia");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",ei,[(0,i._)("div",ai,[(0,i._)("div",oi,[si,ii,(0,i._)("form",{class:"",onSubmit:a[5]||(a[5]=(0,s.iM)((()=>{}),["prevent"]))},[(0,i._)("div",ti,[(0,i._)("div",li,[ni,(0,i.wy)((0,i._)("select",{onChange:a[0]||(a[0]=e=>n.placeHolderAnio()),"onUpdate:modelValue":a[1]||(a[1]=e=>l.anioSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,i.wy)((0,i._)("option",{selected:"",value:l.anioSeleccionado},(0,se.zw)(l.anioSeleccionado),9,ri),[[s.F8,l.mostrarPlaceHolderAnio]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.anios,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,se.zw)(e),9,ci)))),128))],544),[[s.bM,l.anioSeleccionado]])]),(0,i._)("div",di,[ui,(0,i.wy)((0,i._)("select",{onChange:a[2]||(a[2]=e=>n.placeHolderMes()),"onUpdate:modelValue":a[3]||(a[3]=e=>l.mesSeleccionado=e),class:"form-select",id:"validationDefault04",required:""},[(0,i.wy)((0,i._)("option",{selected:"",value:l.mesSeleccionado},(0,se.zw)(n.getNombreMes(l.mesSeleccionado)),9,bi),[[s.F8,l.mostrarPlaceHolderMes]]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.meses,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,se.zw)(n.getNombreMes(e)),9,pi)))),128))],544),[[s.bM,l.mesSeleccionado]])]),(0,i._)("div",mi,[(0,i._)("button",{onClick:a[4]||(a[4]=e=>n.armarURL()),type:"submit",class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalEnvioSugerencia",disabled:l.formValido,style:{float:"right !important"}}," Siguiente ",8,hi)])])],32)])])]),(0,i.Wm)(r,{url:l.url,areaSeleccionada:this.areaSeleccionada,tipoSensorSeleccionado:o.tipoSensorSeleccionado},null,8,["url","areaSeleccionada","tipoSensorSeleccionado"])],64)}const Si={class:"modal fade",id:"modalEnvioSugerencia",tabindex:"-1","aria-labelledby":"modalEnvioSugerencia","aria-hidden":"true"},_i={class:"modal-dialog"},vi={class:"modal-content p-3"},Ai=(0,i._)("div",{class:"d-flex flex-row justify-content-between mb-2"},[(0,i._)("h3",{class:"card-header card-title"},"Solicitud de sugerencia"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),fi=(0,i._)("p",null,"Escriba su sugerencia para seguir mejorando la institución",-1),wi={class:"col-12"},yi=["src"],Ci={class:"col-12 mb-2"},Di=["disabled"],zi={class:"modal fade",id:"modalEnviarAltaSugerencia",tabindex:"-1","aria-labelledby":"modalEnviarAltaSugerenciaLabel","aria-hidden":"false"},Pi={class:"modal-dialog"},ki={class:"modal-content"},xi=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Solicitando sugerencia "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ti={class:"modal-body"},Ii={key:0,class:"spinner-border text-success",role:"status"},Ei=(0,i._)("span",{class:"sr-only"},"iot",-1),Mi=[Ei],Bi={key:1,class:"",role:"status"};function Ri(e,a,o,t,l,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Si,[(0,i._)("div",_i,[(0,i._)("div",vi,[Ai,fi,(0,i._)("form",{class:"",onSubmit:a[2]||(a[2]=(0,s.iM)((()=>{}),["prevent"]))},[(0,i._)("div",wi,[(0,i._)("iframe",{class:"col-12 mb-2",height:"300",width:"400",src:this.url},null,8,yi),(0,i._)("div",Ci,[(0,i.wy)((0,i._)("textarea",{class:"h-100 form-control",id:"sugerenciaForm",rows:"7",placeholder:"Escriba su sugerencia","onUpdate:modelValue":a[0]||(a[0]=e=>l.descripcion=e),required:""},null,512),[[s.nr,l.descripcion]])]),(0,i._)("button",{onClick:a[1]||(a[1]=e=>n.enviarSugerencia()),class:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#modalEnviarAltaSugerencia",disabled:""==l.descripcion}," Enviar sugerencia ",8,Di)])],32)])])]),(0,i._)("div",zi,[(0,i._)("div",Pi,[(0,i._)("div",ki,[xi,(0,i._)("div",Ti,[this.muestraSpinner?((0,i.wg)(),(0,i.iD)("div",Ii,Mi)):((0,i.wg)(),(0,i.iD)("div",Bi,(0,se.zw)(this.textoConfirmacionBaja),1))])])])])],64)}var ji={name:"EnvioFormAltaSugerencia",props:{url:String,areaSeleccionada:String,tipoSensorSeleccionado:String},data(){return{descripcion:"",muestraSpinner:!0,textoConfirmacionBaja:""}},methods:{async enviarSugerencia(){let e=[];e.push(this.url);let a={tipo:"SUGERENCIA",area:this.areaSeleccionada.nombre,tipoSensor:this.tipoSensorSeleccionado.toUpperCase().replaceAll(" ","_"),descripcion:this.descripcion,idSensor:null,urls:e},o=await Q.crearTicketSensor(a);this.muestraSpinner=!1,this.textoConfirmacionBaja=void 0!==o&&""!==o?"Sugerencia enviada con exito!":"Falló el envio de la sugerencia"},"nuevaPestañaGrafico"(){window.open(this.url,"_blank")}}};const Oi=(0,E.Z)(ji,[["render",Ri]]);var Fi=Oi,Hi={components:{EnvioFormAltaSugerencia:Fi},name:"ConfiguracionIFrame",props:{areaSeleccionada:Object,tipoSensorSeleccionado:String},data(){return{meses:[1,2,3,4,5,6,7,8,9,10,11,12],anios:[],mesSeleccionado:"Seleccione mes",anioSeleccionado:"Seleccione año",url:"",mostrarPlaceHolderMes:!0,mostrarPlaceHolderAnio:!0,formValido:!0}},beforeMount(){this.getAnios()},methods:{getAnios(){for(let e=2022;e>=2e3;e--)this.anios.push(e)},getNombreMes(e){switch(e){case 1:return"Enero";case 2:return"Febrero";case 3:return"Marzo";case 4:return"Abril";case 5:return"Mayo";case 6:return"Junio";case 7:return"Julio";case 8:return"Agosto";case 9:return"Septiembre";case 10:return"Octubre";case 11:return"Noviembre";case 12:return"Diciembre";default:return e}},armarURL(){this.url="https://pp1.ath.cx:8443/public/question/ca147253-9337-4489-bcbd-c5e9d43e7d27?anio="+this.anioSeleccionado+"&mes="+this.mesSeleccionado+"&areaId="+this.areaSeleccionada.id+"&tipoSensor="+this.tipoSensorSeleccionado.replaceAll(" ","_")+"#hide_parameters=anio,mes,areaId,tipoSensor"},placeHolderAnio(){this.mostrarPlaceHolderAnio=!1,this.validarForm()},placeHolderMes(){this.mostrarPlaceHolderMes=!1,this.validarForm()},validarForm(){this.formValido=this.mostrarPlaceHolderAnio||this.mostrarPlaceHolderMes}}};const Ui=(0,E.Z)(Hi,[["render",gi]]);var Vi=Ui,Ni={name:"FormAltaSugerencia",components:{ConfiguracionIFrame:Vi},data(){return{pisos:[],areas:[],tiposSensores:[],pisoSeleccionado:"Seleccionar piso",areaSeleccionada:"Seleccionar area",tipoSensorSeleccionado:"Seleccionar tipo de sensor",areasConID:[],idArea:null,mostrarPlaceHolderArea:!0,mostrarPlaceHolderPiso:!0,mostrarPlaceHolderTipoSensor:!0,formValido:!0}},async beforeMount(){this.pisos=await Q.getCantidadPisos(),this.tiposSensores=await Q.formatearTiposDeSensores(await Q.getTiposDeSensores())},methods:{async obtenerAreasPorPiso(){this.areasConID=await Q.getAreasByPiso(this.pisoSeleccionado);for(let e=0;e<this.areasConID.length;e++)this.areas.push(this.areasConID[e][1]);this.placeHolderPiso()},placeHolderPiso(){this.mostrarPlaceHolderPiso=!1,this.validarCampos()},placeHolderArea(){this.mostrarPlaceHolderArea=!1,this.validarCampos()},placeHolderTipoSensor(){this.mostrarPlaceHolderTipoSensor=!1,this.validarCampos()},cargarIdArea(){for(let e=0;e<this.areasConID.length;e++)if(this.areasConID[e][1]===this.areaSeleccionada){let a=this.areasConID[e][0],o=this.areasConID[e][1];this.idArea={id:a,nombre:o}}},validarCampos(){this.formValido=this.mostrarPlaceHolderPiso||this.mostrarPlaceHolderArea||this.mostrarPlaceHolderTipoSensor}}};const Yi=(0,E.Z)(Ni,[["render",$s]]);var Zi=Yi,Wi={name:"Sugerencias",components:{FormAltaSugerencia:Zi},props:{autorizaciones:Object},data(){return{pisos:[],areas:[],pisoSeleccionado:"",areaSeleccionada:"",tiposSensores:["Temperatura","Puerta","Humedad","Calidad de Aire","Proximidad","Humo","Gas","Nivel de ruido"],sugerenciasPendientes:[],sugerenciasCerradas:[],sugerenciasAprobadas:[],sugerenciasRechazadas:[],sugerenciaSeleccionada:{urls:[""]},esDirectivo:!1}},async beforeMount(){this.cargarDatos(),"directivo"==window.sessionStorage.getItem("rol")&&(this.esDirectivo=!0)},methods:{enviarSugerencia:function(e){e&&e.preventDefault()},async cargarDatos(){this.pisos=await Q.getCantidadPisos(),this.sugerenciasPendientes=await Q.getSugerenciasByEstado("ABIERTA"),this.sugerenciasCerradas=await Q.getSugerenciasByEstado("CERRADA"),this.sugerenciasAprobadas=await Q.getSugerenciasByEstado("APROBADA"),this.sugerenciasRechazadas=await Q.getSugerenciasByEstado("DESAPROBADA")},async obtenerAreasPorPiso(){this.areas=await Q.getAreasByPiso(this.pisoSeleccionado)},async aprobarSugerencia(e){Q.aprobarTicket(e),await this.cargarDatos},async rechazarSugerencia(e){Q.rechazarTicket(e),await this.cargarDatos},verDetalleSugerencia(e){this.sugerenciaSeleccionada=e,setTimeout((function(){}),1e3)}}};const Li=(0,E.Z)(Wi,[["render",Is],["__scopeId","data-v-d1ef1b84"]]);var qi=Li,Gi=o.p+"img/inicio2.9ff1804e.png";const Ji=e=>((0,i.dD)("data-v-fe458434"),e=e(),(0,i.Cn)(),e),Ki={id:"inicioBox",class:"d-flex flex-row align-items-center h-100"},Qi=Ji((()=>(0,i._)("div",{class:"d-flex flex-column h-75 mt-15 w-50"},[(0,i._)("h1",null,"¡Bienvenido!"),(0,i._)("p",{class:"blockquote"},[(0,i.Uk)(" El Internet de las cosas describe objetos físicos con sensores, capacidad de procesamiento, software y otras tecnologías que se conectan e intercambian datos con otros dispositivos y sistemas a través de internet u otras redes de comunicación. "),(0,i._)("br"),(0,i._)("br"),(0,i.Uk)(" Este es el portal del area de IOT para la gestion de sensores. Aquí podrá gestionar los sensores. El objetivo de este portal es brindar a la institucion facilidad adminitrativa y mejorar la experiencia de los estudiantes por el paso en la institución. ")])],-1))),Xi=Ji((()=>(0,i._)("div",{class:"w-75 overflow-hidden"},[(0,i._)("img",{src:Gi})],-1))),$i=[Qi,Xi];function et(e,a,o,s,t,l){return(0,i.wg)(),(0,i.iD)("div",Ki,$i)}var at={name:"Inicio",props:{autorizaciones:Object},data(){return{}}};const ot=(0,E.Z)(at,[["render",et],["__scopeId","data-v-fe458434"]]);var st=ot;const it=[{path:"/",name:"inicio",component:st},{path:"/sensores",name:"sensores",component:oo},{path:"/sugerencias",name:"sugerencias",component:qi},{path:"/solicitudes",name:"solicitudes",component:Vo},{path:"/:paginaNoEncontrada(.*)*",component:R}],tt=(0,oe.p7)({history:(0,oe.PO)("/home/"),routes:it});tt.beforeResolve((async(e,a)=>{let o={username:e.query.usuario,email:e.query.email,rol:e.query.categoria,ultimoanio:e.query.ultimoanio,estecnico:e.query.estecnico,instituto:e.query.instituto};if(null==window.sessionStorage.getItem("token")){let a=await Q.validarUsuario(o);void 0!==a&&(null!=window.sessionStorage.getItem("token")&&""!=window.sessionStorage.getItem("token")||(window.sessionStorage.setItem("token",a),window.sessionStorage.setItem("rol",e.query.categoria.toLocaleLowerCase()),window.sessionStorage.setItem("autorizaciones",JSON.stringify(await Q.getAutorizaciones(window.sessionStorage.token)))))}else null==window.sessionStorage.getItem("autorizaciones")&&window.sessionStorage.setItem("autorizaciones",JSON.stringify(await Q.getAutorizaciones(window.sessionStorage.token)));e.fullPath="",e.query.usuario="",e.query.email="",e.query.categoria="",e.query.ultimoanio="",e.query.estecnico="",e.query.instituto=""}));var lt=tt,nt=o(2346),rt=(o(8877),o(85)),ct=o(3636),dt=o(9417);ct.vI.add(dt.QlY,dt.u7T,dt.wp6,dt.IwR,dt.LEp,dt.QmK),(0,s.ri)(ae).use(lt,j.ZP,nt.Z,rt.Z).component("font-awesome-icon",X.GN).mount("#app")},2965:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwABOvYAATr2ATqxVzoAAAAHdElNRQfkCAwLMQ9hEPKPAAABiklEQVRIx83VPY9MURjA8d+dmY3XZrHJfoIpRKtRXESnI0a2FN1G4yU0tEShsZ1GopDwEYRgphJahV0VBfGSRcwYa+fmKmZ29445994xJDynPf//c85znude/nVUf3N/xT57vJZMli7S8EbbeVOT4m+l0skUa3jHl6wiAlP2q0tHoJ6WxQF+zIJZicteuW67rxruUQOxu3YE8z52xOd1nIoZK6roaG9sm5fmrKZpBodveyfV80PqvRP909cy2e549Muz9rR80rBg1jdXPHfTTlUfXHAre+X+CeYLS3fJVqd1stnLBcP4Ge0wnicYxs/m42HBBn6xDA8Ljo6PhwS7PAvi0+F+GRUc1pW6YYtz6zh1DzXVs2hNOA7YLNF11UnbBu9O7CBiS2WCGYdQcUqNTNv0J3BoDsOCvXYjUvPdomtuBwatULCiK/JCy31PfMzH8wQtx23ytBgtEqx6UAauRWXcjf+vIFuDWFL4n0jExYI5c5Ne4aXlsYnlbCOXfdZHI7KkafUPC/dX4yeHS7FpTr8HNQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wOC0xMlQxMTo0OToxNSswMDowMJf82tUAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMDgtMTJUMTE6NDk6MTUrMDA6MDDmoWJpAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADUxMo+NU4EAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTk3MjMyOTU1Q8dOFgAAABJ0RVh0VGh1bWI6OlNpemUANjk0MEJCTl0M0wAAAEd0RVh0VGh1bWI6OlVSSQBmaWxlOi8vLi91cGxvYWRzLzU2L0lpZG5xOHYvMjQ2OS9lZGl0X21vZGlmeV9pY29uXzE0OTQ4OS5wbmeUbIoLAAAAAElFTkSuQmCC"},6654:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAI9JREFUWIXtlkEKgCAQRX8RXqmbdCzv6cpuUBuLsMxxHJFiHkhofP9jNgUoCo8FgAOwRcuFd815Kr9KNOcoo54nGQhFktz6RuGCJhSPtSTffQKfFIhHmtuLC4iiAiqgAirQXWBiZOJvem7/SvcJUAR8eM6M+4/MysieWKR/QKnL1giYcIFnFPuQNTUCyr/ZASPpP7RbDTpRAAAAAElFTkSuQmCC"},2480:function(){}},a={};function o(s){var i=a[s];if(void 0!==i)return i.exports;var t=a[s]={id:s,loaded:!1,exports:{}};return e[s].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}o.m=e,function(){o.amdO={}}(),function(){var e=[];o.O=function(a,s,i,t){if(!s){var l=1/0;for(d=0;d<e.length;d++){s=e[d][0],i=e[d][1],t=e[d][2];for(var n=!0,r=0;r<s.length;r++)(!1&t||l>=t)&&Object.keys(o.O).every((function(e){return o.O[e](s[r])}))?s.splice(r--,1):(n=!1,t<l&&(l=t));if(n){e.splice(d--,1);var c=i();void 0!==c&&(a=c)}}return a}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[s,i,t]}}(),function(){o.d=function(e,a){for(var s in a)o.o(a,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/home/"}(),function(){var e={143:0};o.O.j=function(a){return 0===e[a]};var a=function(a,s){var i,t,l=s[0],n=s[1],r=s[2],c=0;if(l.some((function(a){return 0!==e[a]}))){for(i in n)o.o(n,i)&&(o.m[i]=n[i]);if(r)var d=r(o)}for(a&&a(s);c<l.length;c++)t=l[c],o.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return o.O(d)},s=self["webpackChunkportal_iot"]=self["webpackChunkportal_iot"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(4578)}));s=o.O(s)})();
//# sourceMappingURL=app.dafe4aad.js.map